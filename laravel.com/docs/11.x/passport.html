<!DOCTYPE html>
<html lang="en">


<!-- Mirrored from laravel.com/docs/11.x/passport by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Oct 2024 03:14:26 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">

        <title>Laravel Passport - Laravel 11.x - The PHP Framework For Web Artisans</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

        <link rel="canonical" href="passport.html">
    
    <!-- Primary Meta Tags -->
    <meta name="title" content="Laravel - The PHP Framework For Web Artisans">
    <meta name="description" content="Laravel is a PHP web application framework with expressive, elegant syntax. We’ve already laid the foundation — freeing you to create without sweating the small things.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://laravel.com/">
    <meta property="og:title" content="Laravel - The PHP Framework For Web Artisans">
    <meta property="og:description" content="Laravel is a PHP web application framework with expressive, elegant syntax. We’ve already laid the foundation — freeing you to create without sweating the small things.">
    <meta property="og:image" content="../../img/og-image.jpg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://laravel.com/">
    <meta property="twitter:title" content="Laravel - The PHP Framework For Web Artisans">
    <meta property="twitter:description" content="Laravel is a PHP web application framework with expressive, elegant syntax. We’ve already laid the foundation — freeing you to create without sweating the small things.">
    <meta property="twitter:image" content="../../img/og-image.jpg">

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="../../img/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../img/favicon/favicon-16x16.png">
    <link rel="manifest" href="https://laravel.com/img/favicon/site.webmanifest">
    <link rel="mask-icon" href="https://laravel.com/img/favicon/safari-pinned-tab.svg" color="#ff2d20">
    <link rel="shortcut icon" href="https://laravel.com/img/favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#ff2d20">
    <meta name="msapplication-config" content="https://laravel.com/img/favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <meta name="color-scheme" content="light">

    <link rel="preconnect" href="https://e3mirnpjh5-dsn.algolia.net/" crossorigin />

    <link rel="stylesheet" href="../../../use.typekit.net/ins2wgm.css">
    <link rel="preload" as="style" href="../../build/assets/app-6e52703b.css" /><link rel="modulepreload" href="../../build/assets/app-70a5a3a6.js" /><link rel="modulepreload" href="../../build/assets/docs-45166933.js" /><link rel="stylesheet" href="../../build/assets/app-6e52703b.css" /><script type="module" src="../../build/assets/app-70a5a3a6.js"></script><script type="module" src="../../build/assets/docs-45166933.js"></script>
            <!-- Fathom - beautiful, simple website analytics -->
        <script src="../../../cdn.usefathom.com/script.js" data-site="DVMEKBYF" defer></script>
        <!-- / Fathom -->

        <!-- Clearbit -->
        <script async src="../../../tag.clearbitscripts.com/v1/pk_97d2bf69f817feb07be42fcda1460119/tags.js" referrerpolicy="strict-origin-when-cross-origin"></script>
    
    
    <script>
        const alwaysLightMode = false;
    </script>

    <script>
    function updateTheme() {
        if (!('theme' in localStorage)) {
            localStorage.theme = 'system';
        }

        switch (localStorage.theme) {
            case 'system':
                if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    document.documentElement.classList.add('dark');
                    document.documentElement.setAttribute('data-theme', 'dark');
                } else {
                    document.documentElement.classList.remove('dark');
                    document.documentElement.setAttribute('data-theme', 'light');
                }

                document.documentElement.setAttribute('color-theme', 'system');
                break;

            case 'dark':
                document.documentElement.classList.add('dark');
                document.documentElement.setAttribute('color-theme', 'dark');
                document.documentElement.setAttribute('data-theme', 'dark');
                break;

            case 'light':
                document.documentElement.classList.remove('dark');
                document.documentElement.setAttribute('color-theme', 'light');
                document.documentElement.setAttribute('data-theme', 'light');
                break;
        }

        updateThemeAndSchemeColor();
    }

    function updateThemeAndSchemeColor() {
        if (! alwaysLightMode) {
            if (document.documentElement.classList.contains('dark')) {
                document.querySelector('meta[name="color-scheme"]').setAttribute('content', 'dark');
                document.querySelector('meta[name="theme-color"]').setAttribute('content', '#171923');

                return;
            }

            document.querySelector('meta[name="color-scheme"]').setAttribute('content', 'light');
            document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff');
        }
    }

    updateTheme();
</script>

    </head>
<body
    x-data="{
        navIsOpen: false,
    }"
    class="w-full h-full font-sans antialiased text-gray-900 language-php"
    data-instant-intensity="0"
>

    <a
    id="skip-to-content-link"
    href="#main-content"
    class="absolute bg-gray-100 px-4 py-2 top-3 left-3 text-gray-700 shadow-xl"
>
    Skip to content
</a>

    <div class="hidden lg:flex items-center justify-center bg-gradient-to-b from-red-500 to-red-600 p-2 text-center text-white text-sm h-9">
    <template id="news-herd">
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-white" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" stroke-linecap="round" fill="none" stroke-linejoin="round">
              <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
              <path d="M3 4m0 1a1 1 0 0 1 1 -1h16a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1z" />
              <path d="M7 8v1" />
              <path d="M17 8v1" />
              <path d="M12.5 4c-.654 1.486 -1.26 3.443 -1.5 9h2.5c-.19 2.867 .094 5.024 .5 7" />
              <path d="M7 15.5c3.667 2 6.333 2 10 0" />
            </svg>
        </div>

        <div class="mt-px ml-1">
            Get started with PHP and Laravel faster than ever using <a href="https://herd.laravel.com/" class="underline">Laravel Herd</a>.
        </div>
    </template>

    <template id="news-laracon">
        <div><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div>

        <div class="mt-px ml-1">
            Join us in Dallas, TX! Tickets are now available for <a href="https://laracon.us/" class="underline">Laracon US</a>.
        </div>
    </template>

    <template id="news-laracon-in">
        <div><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div>

        <div class="mt-px ml-1">
            Let's go to India! Tickets are now available for <a href="https://laracon.in/" class="underline">Laracon IN</a>.
        </div>
    </template>

    <template id="news-laracon-eu">
        <div><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div>

        <div class="mt-px ml-1">
            Let's go to Europe! Tickets are now available for <a href="https://laracon.eu/" class="underline">Laracon EU</a>.
        </div>
    </template>

    <template id="news-laracon-au">
        <div><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div>

        <div class="mt-px ml-1">
            Let's go down under! Tickets are now available for <a href="https://laracon.au/" class="underline">Laracon AU</a>.
        </div>
    </template>

    <template id="news-forge">
        <div><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div>

        <div class="mt-px ml-1">
            Servers with PHP 8.3 are now available for provisioning via <a href="https://forge.laravel.com/" class="underline">Laravel Forge</a>.
        </div>
    </template>

    <template id="news-vapor">
        <div><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"></path></svg></div>

        <div class="mt-px ml-1">
            Deploy Laravel with the infinite scale of serverless using <a href="https://vapor.laravel.com/" class="underline">Laravel Vapor</a>.
        </div>
    </template>

    <template id="news-cloud">
        

        <div class="mt-px ml-1">
            Join the waitlist for <a href="https://cloud.laravel.com/" class="underline">Laravel Cloud</a>, the future of shipping.
        </div>
    </template>

    <template id="news-pulse">
        <div><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"></path></svg></div>

        <div class="mt-px ml-1">
            How's your health? Check your application's vital signs using <a href="https://pulse.laravel.com/" class="underline">Laravel Pulse</a>.
        </div>
    </template>

    <template id="news-reverb">
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-white" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
              <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
              <path d="M3.707 6.293l2.586 -2.586a1 1 0 0 1 1.414 0l5.586 5.586a1 1 0 0 1 0 1.414l-2.586 2.586a1 1 0 0 1 -1.414 0l-5.586 -5.586a1 1 0 0 1 0 -1.414z" />
              <path d="M6 10l-3 3l3 3l3 -3" />
              <path d="M10 6l3 -3l3 3l-3 3" />
              <path d="M12 12l1.5 1.5" />
              <path d="M14.5 17a2.5 2.5 0 0 0 2.5 -2.5" />
              <path d="M15 21a6 6 0 0 0 6 -6" />
            </svg>
        </div>

        <div class="mt-px ml-1">
            Incoming transmission received. <a href="https://reverb.laravel.com/" class="underline">Laravel Reverb</a> is now available!
        </div>
    </template>

    <template id="news-nova">
        <div>
            <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15.59 14.37a6 6 0 01-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 006.16-12.12A14.98 14.98 0 009.631 8.41m5.96 5.96a14.926 14.926 0 01-5.841 2.58m-.119-8.54a6 6 0 00-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 00-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 01-2.448-2.448 14.9 14.9 0 01.06-.312m-2.24 2.39a4.493 4.493 0 00-1.757 4.306 4.493 4.493 0 004.306-1.758M16.5 9a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"></path>
            </svg>
        </div>

        <div class="mt-px ml-1">
            Take your administration backend to another dimension with <a href="https://nova.laravel.com/" class="underline">Laravel Nova</a>.
        </div>
    </template>

    <template id="news-careers">
        <div>
            <svg class="w-5 h-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z" />
            </svg>
        </div>

        <div class="mt-px ml-1">
            Laravel is hiring! <a href="https://laravel.com/careers" class="underline">Help us build the future of Laravel</a>.
        </div>

    </template>
</div>
<script>
    const activeNewsTemplate = document.getElementById(
        'news-'+JSON.parse('[\u0022cloud\u0022]')[Math.floor(Math.random() * 1)]
    )

    activeNewsTemplate.replaceWith(activeNewsTemplate.content)
</script>

    <div class="relative dark:bg-dark-700" id="docsScreen">
        <div class="relative lg:flex lg:items-start">
            <aside class="hidden fixed top-0 bottom-0 left-0 z-20 w-16 bg-gradient-to-b from-gray-100 to-white transition-all duration-300 lg:sticky lg:w-80 lg:shrink-0 lg:flex lg:flex-col lg:justify-end lg:items-end 2xl:max-w-lg 2xl:w-full dark:from-dark-800 dark:to-dark-700">
                <div class="relative max-h-screen overflow-auto flex-1 flex flex-col xl:w-80">
                    <a href="https://laravel.com/" class="flex items-center py-8 px-4 lg:px-8 xl:px-16">
                        <img
                            class="w-8 h-8 shrink-0 transition-all duration-300 lg:w-12 lg:h-12"
                            src="https://laravel.com/img/logomark.min.svg"
                            alt="Laravel"
                            width="50"
                            height="52"
                        >
                        <img
                            src="https://laravel.com/img/logotype.min.svg"
                            alt="Laravel"
                            class="hidden ml-4 lg:block"
                            width="114"
                            height="29"
                        >
                    </a>
                    <div class="px-4 pb-10 lg:px-8 xl:px-16">
                        <nav id="indexed-nav" class="hidden lg:block lg:mt-4">
                            <div class="docs_sidebar">
                                <ul>
<li>
<h2>Prologue</h2>
<ul>
<li>
<a href="releases.html">Release Notes</a>
</li>
<li>
<a href="upgrade.html">Upgrade Guide</a>
</li>
<li>
<a href="contributions.html">Contribution Guide</a>
</li>
</ul>
</li>
<li>
<h2>Getting Started</h2>
<ul>
<li>
<a href="installation.html">Installation</a>
</li>
<li>
<a href="configuration.html">Configuration</a>
</li>
<li>
<a href="structure.html">Directory Structure</a>
</li>
<li>
<a href="frontend.html">Frontend</a>
</li>
<li>
<a href="starter-kits.html">Starter Kits</a>
</li>
<li>
<a href="deployment.html">Deployment</a>
</li>
</ul>
</li>
<li>
<h2>Architecture Concepts</h2>
<ul>
<li>
<a href="lifecycle.html">Request Lifecycle</a>
</li>
<li>
<a href="container.html">Service Container</a>
</li>
<li>
<a href="providers.html">Service Providers</a>
</li>
<li>
<a href="facades.html">Facades</a>
</li>
</ul>
</li>
<li>
<h2>The Basics</h2>
<ul>
<li>
<a href="routing.html">Routing</a>
</li>
<li>
<a href="middleware.html">Middleware</a>
</li>
<li>
<a href="csrf.html">CSRF Protection</a>
</li>
<li>
<a href="controllers.html">Controllers</a>
</li>
<li>
<a href="requests.html">Requests</a>
</li>
<li>
<a href="responses.html">Responses</a>
</li>
<li>
<a href="views.html">Views</a>
</li>
<li>
<a href="blade.html">Blade Templates</a>
</li>
<li>
<a href="vite.html">Asset Bundling</a>
</li>
<li>
<a href="urls.html">URL Generation</a>
</li>
<li>
<a href="session.html">Session</a>
</li>
<li>
<a href="validation.html">Validation</a>
</li>
<li>
<a href="errors.html">Error Handling</a>
</li>
<li>
<a href="logging.html">Logging</a>
</li>
</ul>
</li>
<li>
<h2>Digging Deeper</h2>
<ul>
<li>
<a href="artisan.html">Artisan Console</a>
</li>
<li>
<a href="broadcasting.html">Broadcasting</a>
</li>
<li>
<a href="cache.html">Cache</a>
</li>
<li>
<a href="collections.html">Collections</a>
</li>
<li>
<a href="concurrency.html">Concurrency</a>
</li>
<li>
<a href="context.html">Context</a>
</li>
<li>
<a href="contracts.html">Contracts</a>
</li>
<li>
<a href="events.html">Events</a>
</li>
<li>
<a href="filesystem.html">File Storage</a>
</li>
<li>
<a href="helpers.html">Helpers</a>
</li>
<li>
<a href="http-client.html">HTTP Client</a>
</li>
<li>
<a href="localization.html">Localization</a>
</li>
<li>
<a href="mail.html">Mail</a>
</li>
<li>
<a href="notifications.html">Notifications</a>
</li>
<li>
<a href="packages.html">Package Development</a>
</li>
<li>
<a href="processes.html">Processes</a>
</li>
<li>
<a href="queues.html">Queues</a>
</li>
<li>
<a href="rate-limiting.html">Rate Limiting</a>
</li>
<li>
<a href="strings.html">Strings</a>
</li>
<li>
<a href="scheduling.html">Task Scheduling</a>
</li>
</ul>
</li>
<li>
<h2>Security</h2>
<ul>
<li>
<a href="authentication.html">Authentication</a>
</li>
<li>
<a href="authorization.html">Authorization</a>
</li>
<li>
<a href="verification.html">Email Verification</a>
</li>
<li>
<a href="encryption.html">Encryption</a>
</li>
<li>
<a href="hashing.html">Hashing</a>
</li>
<li>
<a href="passwords.html">Password Reset</a>
</li>
</ul>
</li>
<li>
<h2>Database</h2>
<ul>
<li>
<a href="database.html">Getting Started</a>
</li>
<li>
<a href="queries.html">Query Builder</a>
</li>
<li>
<a href="pagination.html">Pagination</a>
</li>
<li>
<a href="migrations.html">Migrations</a>
</li>
<li>
<a href="seeding.html">Seeding</a>
</li>
<li>
<a href="redis.html">Redis</a>
</li>
</ul>
</li>
<li>
<h2>Eloquent ORM</h2>
<ul>
<li>
<a href="eloquent.html">Getting Started</a>
</li>
<li>
<a href="eloquent-relationships.html">Relationships</a>
</li>
<li>
<a href="eloquent-collections.html">Collections</a>
</li>
<li>
<a href="eloquent-mutators.html">Mutators / Casts</a>
</li>
<li>
<a href="eloquent-resources.html">API Resources</a>
</li>
<li>
<a href="eloquent-serialization.html">Serialization</a>
</li>
<li>
<a href="eloquent-factories.html">Factories</a>
</li>
</ul>
</li>
<li>
<h2>Testing</h2>
<ul>
<li>
<a href="testing.html">Getting Started</a>
</li>
<li>
<a href="http-tests.html">HTTP Tests</a>
</li>
<li>
<a href="console-tests.html">Console Tests</a>
</li>
<li>
<a href="dusk.html">Browser Tests</a>
</li>
<li>
<a href="database-testing.html">Database</a>
</li>
<li>
<a href="mocking.html">Mocking</a>
</li>
</ul>
</li>
<li class="sub--on">
<h2>Packages</h2>
<ul>
<li>
<a href="starter-kits.html#laravel-breeze">Breeze</a>
</li>
<li>
<a href="billing.html">Cashier (Stripe)</a>
</li>
<li>
<a href="cashier-paddle.html">Cashier (Paddle)</a>
</li>
<li>
<a href="dusk.html">Dusk</a>
</li>
<li>
<a href="envoy.html">Envoy</a>
</li>
<li>
<a href="fortify.html">Fortify</a>
</li>
<li>
<a href="folio.html">Folio</a>
</li>
<li>
<a href="homestead.html">Homestead</a>
</li>
<li>
<a href="horizon.html">Horizon</a>
</li>
<li>
<a href="https://jetstream.laravel.com/">Jetstream</a>
</li>
<li>
<a href="mix.html">Mix</a>
</li>
<li>
<a href="octane.html">Octane</a>
</li>
<li class="active">
<a href="passport.html">Passport</a>
</li>
<li>
<a href="pennant.html">Pennant</a>
</li>
<li>
<a href="pint.html">Pint</a>
</li>
<li>
<a href="precognition.html">Precognition</a>
</li>
<li>
<a href="prompts.html">Prompts</a>
</li>
<li>
<a href="pulse.html">Pulse</a>
</li>
<li>
<a href="reverb.html">Reverb</a>
</li>
<li>
<a href="sail.html">Sail</a>
</li>
<li>
<a href="sanctum.html">Sanctum</a>
</li>
<li>
<a href="scout.html">Scout</a>
</li>
<li>
<a href="socialite.html">Socialite</a>
</li>
<li>
<a href="telescope.html">Telescope</a>
</li>
<li>
<a href="valet.html">Valet</a>
</li>
</ul>
</li>
<li>
<a href="https://laravel.com/api/11.x">API Documentation</a>
</li>
</ul>

                            </div>
                        </nav>

                        
                        <template id="promote-forge">
                            <div class="mt-4 px-3 py-2 border-dashed border-gray-200 border rounded-lg text-xs leading-loose text-gray-700 lg:block dark:border-gray-400 dark:text-gray-200">
                                <span class="font-medium">Laravel Forge:</span> create and manage PHP 8 servers. Deploy your Laravel applications in seconds. <a class="underline text-red-600" href="https://forge.laravel.com/">Sign up now!</a>.
                            </div>
                        </template>

                        <template id="promote-vapor">
                            <div class="mt-4 px-3 py-2 border-dashed border-gray-200 border rounded-lg text-xs leading-loose text-gray-700 lg:block dark:border-gray-400 dark:text-gray-200">
                                <span class="font-medium">Laravel Vapor:</span> experience extreme scale on a dedicated serverless platform for Laravel. <a class="underline text-red-600" href="https://vapor.laravel.com/">Sign up now!</a>.
                            </div>
                        </template>

                        <template id="promote-nova">
                            <div class="mt-4 px-3 py-2 border-dashed border-gray-200 border rounded-lg text-xs leading-loose text-gray-700 lg:block dark:border-gray-400 dark:text-gray-200">
                                <span class="font-medium">Laravel Nova:</span> The next generation of Nova is <a class="underline text-red-600" href="https://nova.laravel.com/">now available</a>.
                            </div>
                        </template>

                        <template id="promote-pulse">
                            <div class="mt-4 px-3 py-2 border-dashed border-gray-200 border rounded-lg text-xs leading-loose text-gray-700 lg:block dark:border-gray-400 dark:text-gray-200">
                                <span class="font-medium">Laravel Pulse:</span> How's your health? Check your application's vital signs using <a href="https://pulse.laravel.com/" class="underline text-red-600">Laravel Pulse</a>.
                            </div>
                        </template>

                        <template id="promote-reverb">
                            <div class="mt-4 px-3 py-2 border-dashed border-gray-200 border rounded-lg text-xs leading-loose text-gray-700 lg:block dark:border-gray-400 dark:text-gray-200">
                                <span class="font-medium">Laravel Reverb:</span> You can easily build dynamic, real-time Laravel applications using WebSockets. <a href="https://reverb.laravel.com/" class="underline text-red-600">Laravel Reverb</a> is now available!
                            </div>
                        </template>
                        <script>
                            const activePromotionTemplate = document.getElementById(
                                'promote-'+JSON.parse('[\u0022forge\u0022,\u0022vapor\u0022,\u0022nova\u0022,\u0022pulse\u0022,\u0022reverb\u0022]')[Math.floor(Math.random() * 5)]
                            )

                            activePromotionTemplate.replaceWith(activePromotionTemplate.content)
                        </script>
                    </div>
                </div>
            </aside>

            <header
                class="lg:hidden"
                @keydown.window.escape="navIsOpen = false"
                @click.away="navIsOpen = false"
            >
                <div class="relative mx-auto w-full py-10 bg-white transition duration-200 dark:bg-dark-700">
                    <div class="mx-auto px-8 sm:px-16 flex items-center justify-between">
                        <a href="https://laravel.com/" class="flex items-center">
                            <img class="" src="https://laravel.com/img/logomark.min.svg" alt="Laravel" width="50" height="52">
                            <img class="hidden ml-5 sm:block" src="https://laravel.com/img/logotype.min.svg" alt="Laravel" width="114" height="29">
                        </a>
                        <div class="flex-1 flex items-center justify-end">
                            <button id="header__sun" onclick="toSystemMode()" title="Switch to system theme" class="relative w-10 h-10 focus:outline-none focus:shadow-outline text-gray-500">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-sun" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <circle cx="12" cy="12" r="4"></circle>
                                    <path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7"></path>
                                 </svg>
                            </button>
                            <button id="header__moon" onclick="toLightMode()" title="Switch to light mode" class="relative w-10 h-10 focus:outline-none focus:shadow-outline text-gray-500">
                                <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M17.75,4.09L15.22,6.03L16.13,9.09L13.5,7.28L10.87,9.09L11.78,6.03L9.25,4.09L12.44,4L13.5,1L14.56,4L17.75,4.09M21.25,11L19.61,12.25L20.2,14.23L18.5,13.06L16.8,14.23L17.39,12.25L15.75,11L17.81,10.95L18.5,9L19.19,10.95L21.25,11M18.97,15.95C19.8,15.87 20.69,17.05 20.16,17.8C19.84,18.25 19.5,18.67 19.08,19.07C15.17,23 8.84,23 4.94,19.07C1.03,15.17 1.03,8.83 4.94,4.93C5.34,4.53 5.76,4.17 6.21,3.85C6.96,3.32 8.14,4.21 8.06,5.04C7.79,7.9 8.75,10.87 10.95,13.06C13.14,15.26 16.1,16.22 18.97,15.95M17.33,17.97C14.5,17.81 11.7,16.64 9.53,14.5C7.36,12.31 6.2,9.5 6.04,6.68C3.23,9.82 3.34,14.64 6.35,17.66C9.37,20.67 14.19,20.78 17.33,17.97Z" />
                                </svg>
                            </button>
                            <button id="header__indeterminate" onclick="toDarkMode()" title="Switch to dark mode" class="relative w-10 h-10 focus:outline-none focus:shadow-outline text-gray-500">
                                <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M12 2A10 10 0 0 0 2 12A10 10 0 0 0 12 22A10 10 0 0 0 22 12A10 10 0 0 0 12 2M12 4A8 8 0 0 1 20 12A8 8 0 0 1 12 20V4Z" />
                                </svg>
                            </button>
                            <button class="ml-2 relative w-10 h-10 p-2 text-red-600 lg:hidden focus:outline-none focus:shadow-outline" aria-label="Menu" @click.prevent="navIsOpen = !navIsOpen">
                                <svg x-show="! navIsOpen" x-transition.opacity class="absolute inset-0 mt-2 ml-2 w-6 h-6" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                                <svg x-show="navIsOpen" x-transition.opacity x-cloak class="absolute inset-0 mt-2 ml-2 w-6 h-6" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                            </button>
                        </div>
                    </div>
                    <span :class="{ 'shadow-sm': navIsOpen }" class="absolute inset-0 z-20 pointer-events-none"></span>
                </div>
                <div
                    x-show="navIsOpen"
                    x-transition:enter="duration-150"
                    x-transition:leave="duration-100 ease-in"
                    x-cloak
                >
                    <nav
                        x-show="navIsOpen"
                        x-cloak
                        class="absolute w-full transform origin-top shadow-sm z-10"
                        x-transition:enter="duration-150 ease-out"
                        x-transition:enter-start="opacity-0 -translate-y-8 scale-75"
                        x-transition:enter-end="opacity-100 scale-100"
                        x-transition:leave="duration-100 ease-in"
                        x-transition:leave-start="opacity-100 scale-100"
                        x-transition:leave-end="opacity-0 -translate-y-8 scale-75"
                    >
                        <div class="relative p-8 bg-white docs_sidebar dark:bg-dark-600">
                            <ul>
<li>
<h2>Prologue</h2>
<ul>
<li>
<a href="releases.html">Release Notes</a>
</li>
<li>
<a href="upgrade.html">Upgrade Guide</a>
</li>
<li>
<a href="contributions.html">Contribution Guide</a>
</li>
</ul>
</li>
<li>
<h2>Getting Started</h2>
<ul>
<li>
<a href="installation.html">Installation</a>
</li>
<li>
<a href="configuration.html">Configuration</a>
</li>
<li>
<a href="structure.html">Directory Structure</a>
</li>
<li>
<a href="frontend.html">Frontend</a>
</li>
<li>
<a href="starter-kits.html">Starter Kits</a>
</li>
<li>
<a href="deployment.html">Deployment</a>
</li>
</ul>
</li>
<li>
<h2>Architecture Concepts</h2>
<ul>
<li>
<a href="lifecycle.html">Request Lifecycle</a>
</li>
<li>
<a href="container.html">Service Container</a>
</li>
<li>
<a href="providers.html">Service Providers</a>
</li>
<li>
<a href="facades.html">Facades</a>
</li>
</ul>
</li>
<li>
<h2>The Basics</h2>
<ul>
<li>
<a href="routing.html">Routing</a>
</li>
<li>
<a href="middleware.html">Middleware</a>
</li>
<li>
<a href="csrf.html">CSRF Protection</a>
</li>
<li>
<a href="controllers.html">Controllers</a>
</li>
<li>
<a href="requests.html">Requests</a>
</li>
<li>
<a href="responses.html">Responses</a>
</li>
<li>
<a href="views.html">Views</a>
</li>
<li>
<a href="blade.html">Blade Templates</a>
</li>
<li>
<a href="vite.html">Asset Bundling</a>
</li>
<li>
<a href="urls.html">URL Generation</a>
</li>
<li>
<a href="session.html">Session</a>
</li>
<li>
<a href="validation.html">Validation</a>
</li>
<li>
<a href="errors.html">Error Handling</a>
</li>
<li>
<a href="logging.html">Logging</a>
</li>
</ul>
</li>
<li>
<h2>Digging Deeper</h2>
<ul>
<li>
<a href="artisan.html">Artisan Console</a>
</li>
<li>
<a href="broadcasting.html">Broadcasting</a>
</li>
<li>
<a href="cache.html">Cache</a>
</li>
<li>
<a href="collections.html">Collections</a>
</li>
<li>
<a href="concurrency.html">Concurrency</a>
</li>
<li>
<a href="context.html">Context</a>
</li>
<li>
<a href="contracts.html">Contracts</a>
</li>
<li>
<a href="events.html">Events</a>
</li>
<li>
<a href="filesystem.html">File Storage</a>
</li>
<li>
<a href="helpers.html">Helpers</a>
</li>
<li>
<a href="http-client.html">HTTP Client</a>
</li>
<li>
<a href="localization.html">Localization</a>
</li>
<li>
<a href="mail.html">Mail</a>
</li>
<li>
<a href="notifications.html">Notifications</a>
</li>
<li>
<a href="packages.html">Package Development</a>
</li>
<li>
<a href="processes.html">Processes</a>
</li>
<li>
<a href="queues.html">Queues</a>
</li>
<li>
<a href="rate-limiting.html">Rate Limiting</a>
</li>
<li>
<a href="strings.html">Strings</a>
</li>
<li>
<a href="scheduling.html">Task Scheduling</a>
</li>
</ul>
</li>
<li>
<h2>Security</h2>
<ul>
<li>
<a href="authentication.html">Authentication</a>
</li>
<li>
<a href="authorization.html">Authorization</a>
</li>
<li>
<a href="verification.html">Email Verification</a>
</li>
<li>
<a href="encryption.html">Encryption</a>
</li>
<li>
<a href="hashing.html">Hashing</a>
</li>
<li>
<a href="passwords.html">Password Reset</a>
</li>
</ul>
</li>
<li>
<h2>Database</h2>
<ul>
<li>
<a href="database.html">Getting Started</a>
</li>
<li>
<a href="queries.html">Query Builder</a>
</li>
<li>
<a href="pagination.html">Pagination</a>
</li>
<li>
<a href="migrations.html">Migrations</a>
</li>
<li>
<a href="seeding.html">Seeding</a>
</li>
<li>
<a href="redis.html">Redis</a>
</li>
</ul>
</li>
<li>
<h2>Eloquent ORM</h2>
<ul>
<li>
<a href="eloquent.html">Getting Started</a>
</li>
<li>
<a href="eloquent-relationships.html">Relationships</a>
</li>
<li>
<a href="eloquent-collections.html">Collections</a>
</li>
<li>
<a href="eloquent-mutators.html">Mutators / Casts</a>
</li>
<li>
<a href="eloquent-resources.html">API Resources</a>
</li>
<li>
<a href="eloquent-serialization.html">Serialization</a>
</li>
<li>
<a href="eloquent-factories.html">Factories</a>
</li>
</ul>
</li>
<li>
<h2>Testing</h2>
<ul>
<li>
<a href="testing.html">Getting Started</a>
</li>
<li>
<a href="http-tests.html">HTTP Tests</a>
</li>
<li>
<a href="console-tests.html">Console Tests</a>
</li>
<li>
<a href="dusk.html">Browser Tests</a>
</li>
<li>
<a href="database-testing.html">Database</a>
</li>
<li>
<a href="mocking.html">Mocking</a>
</li>
</ul>
</li>
<li class="sub--on">
<h2>Packages</h2>
<ul>
<li>
<a href="starter-kits.html#laravel-breeze">Breeze</a>
</li>
<li>
<a href="billing.html">Cashier (Stripe)</a>
</li>
<li>
<a href="cashier-paddle.html">Cashier (Paddle)</a>
</li>
<li>
<a href="dusk.html">Dusk</a>
</li>
<li>
<a href="envoy.html">Envoy</a>
</li>
<li>
<a href="fortify.html">Fortify</a>
</li>
<li>
<a href="folio.html">Folio</a>
</li>
<li>
<a href="homestead.html">Homestead</a>
</li>
<li>
<a href="horizon.html">Horizon</a>
</li>
<li>
<a href="https://jetstream.laravel.com/">Jetstream</a>
</li>
<li>
<a href="mix.html">Mix</a>
</li>
<li>
<a href="octane.html">Octane</a>
</li>
<li class="active">
<a href="passport.html">Passport</a>
</li>
<li>
<a href="pennant.html">Pennant</a>
</li>
<li>
<a href="pint.html">Pint</a>
</li>
<li>
<a href="precognition.html">Precognition</a>
</li>
<li>
<a href="prompts.html">Prompts</a>
</li>
<li>
<a href="pulse.html">Pulse</a>
</li>
<li>
<a href="reverb.html">Reverb</a>
</li>
<li>
<a href="sail.html">Sail</a>
</li>
<li>
<a href="sanctum.html">Sanctum</a>
</li>
<li>
<a href="scout.html">Scout</a>
</li>
<li>
<a href="socialite.html">Socialite</a>
</li>
<li>
<a href="telescope.html">Telescope</a>
</li>
<li>
<a href="valet.html">Valet</a>
</li>
</ul>
</li>
<li>
<a href="https://laravel.com/api/11.x">API Documentation</a>
</li>
</ul>

                        </div>
                    </nav>
                </div>
            </header>

            <section class="flex-1 dark:bg-dark-700">
                <div class="max-w-screen-lg px-8 sm:px-16 lg:px-24">
                    <div class="flex flex-col items-end border-b border-gray-200 py-1 transition-colors dark:border-gray-700 lg:mt-8 lg:flex-row-reverse">
                        <div class="hidden lg:flex items-center justify-center ml-8">
                            <button id="header__sun" onclick="toSystemMode()" title="Switch to system theme" class="relative w-10 h-10 focus:outline-none focus:shadow-outline text-gray-500">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-sun" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <circle cx="12" cy="12" r="4"></circle>
                                    <path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7"></path>
                                 </svg>
                            </button>
                            <button id="header__moon" onclick="toLightMode()" title="Switch to light mode" class="relative w-10 h-10 focus:outline-none focus:shadow-outline text-gray-500">
                                <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M17.75,4.09L15.22,6.03L16.13,9.09L13.5,7.28L10.87,9.09L11.78,6.03L9.25,4.09L12.44,4L13.5,1L14.56,4L17.75,4.09M21.25,11L19.61,12.25L20.2,14.23L18.5,13.06L16.8,14.23L17.39,12.25L15.75,11L17.81,10.95L18.5,9L19.19,10.95L21.25,11M18.97,15.95C19.8,15.87 20.69,17.05 20.16,17.8C19.84,18.25 19.5,18.67 19.08,19.07C15.17,23 8.84,23 4.94,19.07C1.03,15.17 1.03,8.83 4.94,4.93C5.34,4.53 5.76,4.17 6.21,3.85C6.96,3.32 8.14,4.21 8.06,5.04C7.79,7.9 8.75,10.87 10.95,13.06C13.14,15.26 16.1,16.22 18.97,15.95M17.33,17.97C14.5,17.81 11.7,16.64 9.53,14.5C7.36,12.31 6.2,9.5 6.04,6.68C3.23,9.82 3.34,14.64 6.35,17.66C9.37,20.67 14.19,20.78 17.33,17.97Z" />
                                </svg>
                            </button>
                            <button id="header__indeterminate" onclick="toDarkMode()" title="Switch to dark mode" class="relative w-10 h-10 focus:outline-none focus:shadow-outline text-gray-500">
                                <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M12 2A10 10 0 0 0 2 12A10 10 0 0 0 12 22A10 10 0 0 0 22 12A10 10 0 0 0 12 2M12 4A8 8 0 0 1 20 12A8 8 0 0 1 12 20V4Z" />
                                </svg>
                            </button>
                        </div>
                        <div class="w-full lg:w-40 lg:pl-12">
                            <div>
                                <label class="text-gray-600 text-xs tracking-widest uppercase dark:text-gray-500" for="version-switcher">Version</label>
                                <div x-data class="relative w-full bg-white transition-all duration-500 focus-within:border-gray-600 dark:bg-gray-800">
                                    <select
                                        id="version-switcher"
                                        aria-label="Laravel version"
                                        class="appearance-none flex-1 w-full px-0 py-1 placeholder-gray-900 tracking-wide bg-white border-transparent focus:outline-none dark:bg-dark-700 dark:text-gray-400 dark:placeholder-gray-500"
                                        @change="window.location = $event.target.value"
                                    >
                                                                                    <option  value="https://laravel.com/docs/master/passport">Master</option>
                                                                                    <option selected value="passport.html">11.x</option>
                                                                                    <option  value="https://laravel.com/docs/10.x/passport">10.x</option>
                                                                                    <option  value="https://laravel.com/docs/9.x/passport">9.x</option>
                                                                                    <option  value="https://laravel.com/docs/8.x/passport">8.x</option>
                                                                                    <option  value="https://laravel.com/docs/7.x/passport">7.x</option>
                                                                                    <option  value="https://laravel.com/docs/6.x/passport">6.x</option>
                                                                                    <option  value="https://laravel.com/docs/5.8/passport">5.8</option>
                                                                                    <option  value="https://laravel.com/docs/5.7/passport">5.7</option>
                                                                                    <option  value="https://laravel.com/docs/5.6/passport">5.6</option>
                                                                                    <option  value="https://laravel.com/docs/5.5/passport">5.5</option>
                                                                                    <option  value="https://laravel.com/docs/5.4/passport">5.4</option>
                                                                                    <option  value="https://laravel.com/docs/5.3/passport">5.3</option>
                                                                                    <option  value="https://laravel.com/docs/5.2/passport">5.2</option>
                                                                                    <option  value="https://laravel.com/docs/5.1/passport">5.1</option>
                                                                                    <option  value="https://laravel.com/docs/5.0/passport">5.0</option>
                                                                                    <option  value="https://laravel.com/docs/4.2/passport">4.2</option>
                                                                            </select>
                                    <img class="absolute inset-y-0 right-0 mt-2.5 w-2.5 h-2.5 text-gray-900 pointer-events-none dark:hidden" src="https://laravel.com/img/icons/drop_arrow.min.svg" alt="" width="10" height="10">
                                    <img class="absolute inset-y-0 right-0 mt-2.5 w-2.5 h-2.5 text-gray-900 pointer-events-none hidden dark:block" src="https://laravel.com/img/icons/drop_arrow.dark.min.svg" alt="" width="10" height="10">
                                </div>
                            </div>
                        </div>
                        <div class="relative mt-8 flex items-center justify-end w-full h-10 lg:mt-0">
                            <div class="flex-1 flex items-center">
                                <button id="docsearch" class="text-gray-800 transition-colors dark:text-gray-400 w-full"></button>
                            </div>
                        </div>
                    </div>

                    <section class="mt-8 md:mt-16">
                        <section class="docs_main max-w-prose">
                            
                            
                            <div id="main-content">
    <h1>Laravel Passport</h1>
<ul>
<li>
<a href="#introduction">Introduction</a>
<ul>
<li>
<a href="#passport-or-sanctum">Passport or Sanctum?</a>
</li>
</ul>
</li>
<li>
<a href="#installation">Installation</a>
<ul>
<li>
<a href="#deploying-passport">Deploying Passport</a>
</li>
<li>
<a href="#upgrading-passport">Upgrading Passport</a>
</li>
</ul>
</li>
<li>
<a href="#configuration">Configuration</a>
<ul>
<li>
<a href="#client-secret-hashing">Client Secret Hashing</a>
</li>
<li>
<a href="#token-lifetimes">Token Lifetimes</a>
</li>
<li>
<a href="#overriding-default-models">Overriding Default Models</a>
</li>
<li>
<a href="#overriding-routes">Overriding Routes</a>
</li>
</ul>
</li>
<li>
<a href="#issuing-access-tokens">Issuing Access Tokens</a>
<ul>
<li>
<a href="#managing-clients">Managing Clients</a>
</li>
<li>
<a href="#requesting-tokens">Requesting Tokens</a>
</li>
<li>
<a href="#refreshing-tokens">Refreshing Tokens</a>
</li>
<li>
<a href="#revoking-tokens">Revoking Tokens</a>
</li>
<li>
<a href="#purging-tokens">Purging Tokens</a>
</li>
</ul>
</li>
<li>
<a href="#code-grant-pkce">Authorization Code Grant With PKCE</a>
<ul>
<li>
<a href="#creating-a-auth-pkce-grant-client">Creating the Client</a>
</li>
<li>
<a href="#requesting-auth-pkce-grant-tokens">Requesting Tokens</a>
</li>
</ul>
</li>
<li>
<a href="#password-grant-tokens">Password Grant Tokens</a>
<ul>
<li>
<a href="#creating-a-password-grant-client">Creating a Password Grant Client</a>
</li>
<li>
<a href="#requesting-password-grant-tokens">Requesting Tokens</a>
</li>
<li>
<a href="#requesting-all-scopes">Requesting All Scopes</a>
</li>
<li>
<a href="#customizing-the-user-provider">Customizing the User Provider</a>
</li>
<li>
<a href="#customizing-the-username-field">Customizing the Username Field</a>
</li>
<li>
<a href="#customizing-the-password-validation">Customizing the Password Validation</a>
</li>
</ul>
</li>
<li>
<a href="#implicit-grant-tokens">Implicit Grant Tokens</a>
</li>
<li>
<a href="#client-credentials-grant-tokens">Client Credentials Grant Tokens</a>
</li>
<li>
<a href="#personal-access-tokens">Personal Access Tokens</a>
<ul>
<li>
<a href="#creating-a-personal-access-client">Creating a Personal Access Client</a>
</li>
<li>
<a href="#managing-personal-access-tokens">Managing Personal Access Tokens</a>
</li>
</ul>
</li>
<li>
<a href="#protecting-routes">Protecting Routes</a>
<ul>
<li>
<a href="#via-middleware">Via Middleware</a>
</li>
<li>
<a href="#passing-the-access-token">Passing the Access Token</a>
</li>
</ul>
</li>
<li>
<a href="#token-scopes">Token Scopes</a>
<ul>
<li>
<a href="#defining-scopes">Defining Scopes</a>
</li>
<li>
<a href="#default-scope">Default Scope</a>
</li>
<li>
<a href="#assigning-scopes-to-tokens">Assigning Scopes to Tokens</a>
</li>
<li>
<a href="#checking-scopes">Checking Scopes</a>
</li>
</ul>
</li>
<li>
<a href="#consuming-your-api-with-javascript">Consuming Your API With JavaScript</a>
</li>
<li>
<a href="#events">Events</a>
</li>
<li>
<a href="#testing">Testing</a>
</li>
</ul>
<h2 id="introduction"><a href="#introduction">Introduction</a></h2>
<p><a href="https://github.com/laravel/passport">Laravel Passport</a> provides a full OAuth2 server implementation for your Laravel application in a matter of minutes. Passport is built on top of the <a href="https://github.com/thephpleague/oauth2-server">League OAuth2 server</a> that is maintained by Andy Millington and Simon Hamp.</p>
<div class="mb-10 max-w-2xl mx-auto px-4 py-8 shadow-lg lg:flex lg:items-center callout">
    <div class="w-20 h-20 mb-6 flex items-center justify-center shrink-0 lg:mb-0 bg-red-600">
        <div class="opacity-75"><svg width="6" height="35" viewBox="0 0 6 35" xmlns="http://www.w3.org/2000/svg"><title>exclamation</title><path d="M0 29h6v6H0v-6zM0 0h6v24H0V0z" fill="#FFF" fill-rule="nonzero"/></svg>
</div>
    </div>
    <p class="mb-0 lg:ml-6 callout">
This documentation assumes you are already familiar with OAuth2. If you do not know anything about OAuth2, consider familiarizing yourself with the general <a href="https://oauth2.thephpleague.com/terminology/">terminology</a> and features of OAuth2 before continuing.</p>
</div>
<h3 id="passport-or-sanctum"><a href="#passport-or-sanctum">Passport or Sanctum?</a></h3>
<p>Before getting started, you may wish to determine if your application would be better served by Laravel Passport or <a href="sanctum.html">Laravel Sanctum</a>. If your application absolutely needs to support OAuth2, then you should use Laravel Passport.</p>
<p>However, if you are attempting to authenticate a single-page application, mobile application, or issue API tokens, you should use <a href="sanctum.html">Laravel Sanctum</a>. Laravel Sanctum does not support OAuth2; however, it provides a much simpler API authentication development experience.</p>
<h2 id="installation"><a href="#installation">Installation</a></h2>
<p>You may install Laravel Passport via the <code>install:api</code> Artisan command:</p>
<div class="code-container">
<pre><code data-theme="olaolu-palenight" data-lang="shell" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">install:api</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">--passport</span></div></code></pre>
</div>
<p>This command will publish and run the database migrations necessary for creating the tables your application needs to store OAuth2 clients and access tokens. The command will also create the encryption keys required to generate secure access tokens.</p>
<p>Additionally, this command will ask if you would like to use UUIDs as the primary key value of the Passport <code>Client</code> model instead of auto-incrementing integers.</p>
<p>After running the <code>install:api</code> command, add the <code>Laravel\Passport\HasApiTokens</code> trait to your <code>App\Models\User</code> model. This trait will provide a few helper methods to your model which allow you to inspect the authenticated user's token and scopes:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #D3423E;">&lt;?php</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #C792EA;">namespace</span><span style="color: #BFC7D5;"> App\Models;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Database\Eloquent\Factories\</span><span style="color: #FFCB8B;">HasFactory</span><span style="color: #BFC7D5;">;</span></div><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Foundation\Auth\</span><span style="color: #FFCB8B;">User</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">as</span><span style="color: #BFC7D5;"> Authenticatable;</span></div><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Notifications\</span><span style="color: #FFCB8B;">Notifiable</span><span style="color: #BFC7D5;">;</span></div><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Laravel\Passport\</span><span style="color: #FFCB8B;">HasApiTokens</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">User</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">Authenticatable</span></div><div class='line'><span style="color: #BFC7D5;">{</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">HasApiTokens</span><span style="color: #BFC7D5;">, </span><span style="color: #FFCB8B;">HasFactory</span><span style="color: #BFC7D5;">, </span><span style="color: #FFCB8B;">Notifiable</span><span style="color: #BFC7D5;">;</span></div><div class='line'><span style="color: #BFC7D5;">}</span></div></code></pre>
<p>Finally, in your application's <code>config/auth.php</code> configuration file, you should define an <code>api</code> authentication guard and set the <code>driver</code> option to <code>passport</code>. This will instruct your application to use Passport's <code>TokenGuard</code> when authenticating incoming API requests:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">guards</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> [</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">web</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> [</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">driver</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">session</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">provider</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">users</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    ],</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">api</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> [</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">driver</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">passport</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">provider</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">users</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    ],</span></div><div class='line'><span style="color: #BFC7D5;">],</span></div></code></pre>
<h3 id="deploying-passport"><a href="#deploying-passport">Deploying Passport</a></h3>
<p>When deploying Passport to your application's servers for the first time, you will likely need to run the <code>passport:keys</code> command. This command generates the encryption keys Passport needs in order to generate access tokens. The generated keys are not typically kept in source control:</p>
<div class="code-container">
<pre><code data-theme="olaolu-palenight" data-lang="shell" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">passport:keys</span></div></code></pre>
</div>
<p>If necessary, you may define the path where Passport's keys should be loaded from. You may use the <code>Passport::loadKeysFrom</code> method to accomplish this. Typically, this method should be called from the <code>boot</code> method of your application's <code>App\Providers\AppServiceProvider</code> class:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #697098;">/**</span></div><div class='line'><span style="color: #697098;"> * Bootstrap any application services.</span></div><div class='line'><span style="color: #697098;"> </span><span style="color: #697098;">*/</span></div><div class='line'><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">boot</span><span style="color: #D9F5DD;">()</span><span style="color: #89DDFF;">:</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">void</span></div><div class='line'><span style="color: #BFC7D5;">{</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #FFCB8B;">Passport</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">loadKeysFrom</span><span style="color: #BFC7D5;">(</span><span style="color: #82AAFF;">__DIR__</span><span style="color: #89DDFF;">.</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/../secrets/oauth</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">);</span></div><div class='line'><span style="color: #BFC7D5;">}</span></div></code></pre>
<h4 id="loading-keys-from-the-environment"><a href="#loading-keys-from-the-environment">Loading Keys From the Environment</a></h4>
<p>Alternatively, you may publish Passport's configuration file using the <code>vendor:publish</code> Artisan command:</p>
<div class="code-container">
<pre><code data-theme="olaolu-palenight" data-lang="shell" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">vendor:publish</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">--tag=passport-config</span></div></code></pre>
</div>
<p>After the configuration file has been published, you may load your application's encryption keys by defining them as environment variables:</p>
<div class="code-container">
<pre><code data-theme="olaolu-palenight" data-lang="ini" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">PASSPORT_PRIVATE_KEY</span><span style="color: #BFC7D5;">=</span><span style="color: #D9F5DD;">&quot;</span><span style="color: #C3E88D;">-----BEGIN RSA PRIVATE KEY-----</span></div><div class='line'><span style="color: #C3E88D;">&lt;private key here&gt;</span></div><div class='line'><span style="color: #C3E88D;">-----END RSA PRIVATE KEY-----</span><span style="color: #D9F5DD;">&quot;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #C792EA;">PASSPORT_PUBLIC_KEY</span><span style="color: #BFC7D5;">=</span><span style="color: #D9F5DD;">&quot;</span><span style="color: #C3E88D;">-----BEGIN PUBLIC KEY-----</span></div><div class='line'><span style="color: #C3E88D;">&lt;public key here&gt;</span></div><div class='line'><span style="color: #C3E88D;">-----END PUBLIC KEY-----</span><span style="color: #D9F5DD;">&quot;</span></div></code></pre>
</div>
<h3 id="upgrading-passport"><a href="#upgrading-passport">Upgrading Passport</a></h3>
<p>When upgrading to a new major version of Passport, it's important that you carefully review <a href="https://github.com/laravel/passport/blob/master/UPGRADE.md">the upgrade guide</a>.</p>
<h2 id="configuration"><a href="#configuration">Configuration</a></h2>
<h3 id="client-secret-hashing"><a href="#client-secret-hashing">Client Secret Hashing</a></h3>
<p>If you would like your client's secrets to be hashed when stored in your database, you should call the <code>Passport::hashClientSecrets</code> method in the <code>boot</code> method of your <code>App\Providers\AppServiceProvider</code> class:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Laravel\Passport\</span><span style="color: #FFCB8B;">Passport</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #FFCB8B;">Passport</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">hashClientSecrets</span><span style="color: #BFC7D5;">();</span></div></code></pre>
<p>Once enabled, all of your client secrets will only be displayable to the user immediately after they are created. Since the plain-text client secret value is never stored in the database, it is not possible to recover the secret's value if it is lost.</p>
<h3 id="token-lifetimes"><a href="#token-lifetimes">Token Lifetimes</a></h3>
<p>By default, Passport issues long-lived access tokens that expire after one year. If you would like to configure a longer / shorter token lifetime, you may use the <code>tokensExpireIn</code>, <code>refreshTokensExpireIn</code>, and <code>personalAccessTokensExpireIn</code> methods. These methods should be called from the <code>boot</code> method of your application's <code>App\Providers\AppServiceProvider</code> class:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #697098;">/**</span></div><div class='line'><span style="color: #697098;"> * Bootstrap any application services.</span></div><div class='line'><span style="color: #697098;"> </span><span style="color: #697098;">*/</span></div><div class='line'><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">boot</span><span style="color: #D9F5DD;">()</span><span style="color: #89DDFF;">:</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">void</span></div><div class='line'><span style="color: #BFC7D5;">{</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #FFCB8B;">Passport</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">tokensExpireIn</span><span style="color: #BFC7D5;">(</span><span style="color: #82AAFF;">now</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">addDays</span><span style="color: #BFC7D5;">(</span><span style="color: #F78C6C;">15</span><span style="color: #BFC7D5;">));</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #FFCB8B;">Passport</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">refreshTokensExpireIn</span><span style="color: #BFC7D5;">(</span><span style="color: #82AAFF;">now</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">addDays</span><span style="color: #BFC7D5;">(</span><span style="color: #F78C6C;">30</span><span style="color: #BFC7D5;">));</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #FFCB8B;">Passport</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">personalAccessTokensExpireIn</span><span style="color: #BFC7D5;">(</span><span style="color: #82AAFF;">now</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">addMonths</span><span style="color: #BFC7D5;">(</span><span style="color: #F78C6C;">6</span><span style="color: #BFC7D5;">));</span></div><div class='line'><span style="color: #BFC7D5;">}</span></div></code></pre>
<div class="mb-10 max-w-2xl mx-auto px-4 py-8 shadow-lg lg:flex lg:items-center callout">
    <div class="w-20 h-20 mb-6 flex items-center justify-center shrink-0 lg:mb-0 bg-red-600">
        <div class="opacity-75"><svg width="6" height="35" viewBox="0 0 6 35" xmlns="http://www.w3.org/2000/svg"><title>exclamation</title><path d="M0 29h6v6H0v-6zM0 0h6v24H0V0z" fill="#FFF" fill-rule="nonzero"/></svg>
</div>
    </div>
    <p class="mb-0 lg:ml-6 callout">
The <code>expires_at</code> columns on Passport's database tables are read-only and for display purposes only. When issuing tokens, Passport stores the expiration information within the signed and encrypted tokens. If you need to invalidate a token you should <a href="#revoking-tokens">revoke it</a>.</p>
</div>
<h3 id="overriding-default-models"><a href="#overriding-default-models">Overriding Default Models</a></h3>
<p>You are free to extend the models used internally by Passport by defining your own model and extending the corresponding Passport model:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Laravel\Passport\</span><span style="color: #FFCB8B;">Client</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">as</span><span style="color: #BFC7D5;"> PassportClient;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">Client</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">PassportClient</span></div><div class='line'><span style="color: #BFC7D5;">{</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #697098;">//</span><span style="color: #697098;"> ...</span></div><div class='line'><span style="color: #BFC7D5;">}</span></div></code></pre>
<p>After defining your model, you may instruct Passport to use your custom model via the <code>Laravel\Passport\Passport</code> class. Typically, you should inform Passport about your custom models in the <code>boot</code> method of your application's <code>App\Providers\AppServiceProvider</code> class:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> App\Models\Passport\</span><span style="color: #FFCB8B;">AuthCode</span><span style="color: #BFC7D5;">;</span></div><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> App\Models\Passport\</span><span style="color: #FFCB8B;">Client</span><span style="color: #BFC7D5;">;</span></div><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> App\Models\Passport\</span><span style="color: #FFCB8B;">PersonalAccessClient</span><span style="color: #BFC7D5;">;</span></div><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> App\Models\Passport\</span><span style="color: #FFCB8B;">RefreshToken</span><span style="color: #BFC7D5;">;</span></div><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> App\Models\Passport\</span><span style="color: #FFCB8B;">Token</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #697098;">/**</span></div><div class='line'><span style="color: #697098;"> * Bootstrap any application services.</span></div><div class='line'><span style="color: #697098;"> </span><span style="color: #697098;">*/</span></div><div class='line'><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">boot</span><span style="color: #D9F5DD;">()</span><span style="color: #89DDFF;">:</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">void</span></div><div class='line'><span style="color: #BFC7D5;">{</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #FFCB8B;">Passport</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">useTokenModel</span><span style="color: #BFC7D5;">(</span><span style="color: #FFCB8B;">Token</span><span style="color: #89DDFF;">::</span><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;">);</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #FFCB8B;">Passport</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">useRefreshTokenModel</span><span style="color: #BFC7D5;">(</span><span style="color: #FFCB8B;">RefreshToken</span><span style="color: #89DDFF;">::</span><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;">);</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #FFCB8B;">Passport</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">useAuthCodeModel</span><span style="color: #BFC7D5;">(</span><span style="color: #FFCB8B;">AuthCode</span><span style="color: #89DDFF;">::</span><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;">);</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #FFCB8B;">Passport</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">useClientModel</span><span style="color: #BFC7D5;">(</span><span style="color: #FFCB8B;">Client</span><span style="color: #89DDFF;">::</span><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;">);</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #FFCB8B;">Passport</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">usePersonalAccessClientModel</span><span style="color: #BFC7D5;">(</span><span style="color: #FFCB8B;">PersonalAccessClient</span><span style="color: #89DDFF;">::</span><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;">);</span></div><div class='line'><span style="color: #BFC7D5;">}</span></div></code></pre>
<h3 id="overriding-routes"><a href="#overriding-routes">Overriding Routes</a></h3>
<p>Sometimes you may wish to customize the routes defined by Passport. To achieve this, you first need to ignore the routes registered by Passport by adding <code>Passport::ignoreRoutes</code> to the <code>register</code> method of your application's <code>AppServiceProvider</code>:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Laravel\Passport\</span><span style="color: #FFCB8B;">Passport</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #697098;">/**</span></div><div class='line'><span style="color: #697098;"> * Register any application services.</span></div><div class='line'><span style="color: #697098;"> </span><span style="color: #697098;">*/</span></div><div class='line'><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">register</span><span style="color: #D9F5DD;">()</span><span style="color: #89DDFF;">:</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">void</span></div><div class='line'><span style="color: #BFC7D5;">{</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #FFCB8B;">Passport</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">ignoreRoutes</span><span style="color: #BFC7D5;">();</span></div><div class='line'><span style="color: #BFC7D5;">}</span></div></code></pre>
<p>Then, you may copy the routes defined by Passport in <a href="https://github.com/laravel/passport/blob/11.x/routes/web.php">its routes file</a> to your application's <code>routes/web.php</code> file and modify them to your liking:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #FFCB8B;">Route</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">group</span><span style="color: #BFC7D5;">([</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">as</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">passport.</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">prefix</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">config</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">passport.path</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span><span style="color: #82AAFF;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">oauth</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">),</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">namespace</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">\Laravel\Passport\Http\Controllers</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">], </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">()</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #697098;">//</span><span style="color: #697098;"> Passport routes...</span></div><div class='line'><span style="color: #BFC7D5;">});</span></div></code></pre>
<h2 id="issuing-access-tokens"><a href="#issuing-access-tokens">Issuing Access Tokens</a></h2>
<p>Using OAuth2 via authorization codes is how most developers are familiar with OAuth2. When using authorization codes, a client application will redirect a user to your server where they will either approve or deny the request to issue an access token to the client.</p>
<h3 id="managing-clients"><a href="#managing-clients">Managing Clients</a></h3>
<p>First, developers building applications that need to interact with your application's API will need to register their application with yours by creating a &quot;client&quot;. Typically, this consists of providing the name of their application and a URL that your application can redirect to after users approve their request for authorization.</p>
<h4 id="the-passportclient-command"><a href="#the-passportclient-command">The <code>passport:client</code> Command</a></h4>
<p>The simplest way to create a client is using the <code>passport:client</code> Artisan command. This command may be used to create your own clients for testing your OAuth2 functionality. When you run the <code>client</code> command, Passport will prompt you for more information about your client and will provide you with a client ID and secret:</p>
<div class="code-container">
<pre><code data-theme="olaolu-palenight" data-lang="shell" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">passport:client</span></div></code></pre>
</div>
<p><strong>Redirect URLs</strong></p>
<p>If you would like to allow multiple redirect URLs for your client, you may specify them using a comma-delimited list when prompted for the URL by the <code>passport:client</code> command. Any URLs which contain commas should be URL encoded:</p>
<div class="code-container">
<pre><code data-theme="olaolu-palenight" data-lang="shell" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #BFC7D5;">http://example.com/callback,http://examplefoo.com/callback</span></div></code></pre>
</div>
<h4 id="clients-json-api"><a href="#clients-json-api">JSON API</a></h4>
<p>Since your application's users will not be able to utilize the <code>client</code> command, Passport provides a JSON API that you may use to create clients. This saves you the trouble of having to manually code controllers for creating, updating, and deleting clients.</p>
<p>However, you will need to pair Passport's JSON API with your own frontend to provide a dashboard for your users to manage their clients. Below, we'll review all of the API endpoints for managing clients. For convenience, we'll use <a href="https://github.com/axios/axios">Axios</a> to demonstrate making HTTP requests to the endpoints.</p>
<p>The JSON API is guarded by the <code>web</code> and <code>auth</code> middleware; therefore, it may only be called from your own application. It is not able to be called from an external source.</p>
<h4 id="get-oauthclients"><a href="#get-oauthclients"><code>GET /oauth/clients</code></a></h4>
<p>This route returns all of the clients for the authenticated user. This is primarily useful for listing all of the user's clients so that they may edit or delete them:</p>
<div class="code-container">
<pre><code data-theme="olaolu-palenight" data-lang="js" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #BFC7D5;">axios</span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">get</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/oauth/clients</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">)</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">then</span><span style="color: #BFC7D5;">(</span><span style="color: #7986E7;">response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">        console</span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">log</span><span style="color: #BFC7D5;">(response</span><span style="color: #C792EA;">.</span><span style="color: #89DDFF;">data</span><span style="color: #BFC7D5;">);</span></div><div class='line'><span style="color: #BFC7D5;">    });</span></div></code></pre>
</div>
<h4 id="post-oauthclients"><a href="#post-oauthclients"><code>POST /oauth/clients</code></a></h4>
<p>This route is used to create new clients. It requires two pieces of data: the client's <code>name</code> and a <code>redirect</code> URL. The <code>redirect</code> URL is where the user will be redirected after approving or denying a request for authorization.</p>
<p>When a client is created, it will be issued a client ID and client secret. These values will be used when requesting access tokens from your application. The client creation route will return the new client instance:</p>
<div class="code-container">
<pre><code data-theme="olaolu-palenight" data-lang="js" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">const</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">data</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">    name: </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">Client Name</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    redirect: </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">http://example.com/callback</span><span style="color: #D9F5DD;">&#39;</span></div><div class='line'><span style="color: #BFC7D5;">};</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BFC7D5;">axios</span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">post</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/oauth/clients</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, data)</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">then</span><span style="color: #BFC7D5;">(</span><span style="color: #7986E7;">response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">        console</span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">log</span><span style="color: #BFC7D5;">(response</span><span style="color: #C792EA;">.</span><span style="color: #89DDFF;">data</span><span style="color: #BFC7D5;">);</span></div><div class='line'><span style="color: #BFC7D5;">    })</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">catch</span><span style="color: #BFC7D5;"> (</span><span style="color: #7986E7;">response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #697098;">//</span><span style="color: #697098;"> List errors on response...</span></div><div class='line'><span style="color: #BFC7D5;">    });</span></div></code></pre>
</div>
<h4 id="put-oauthclientsclient-id"><a href="#put-oauthclientsclient-id"><code>PUT /oauth/clients/{client-id}</code></a></h4>
<p>This route is used to update clients. It requires two pieces of data: the client's <code>name</code> and a <code>redirect</code> URL. The <code>redirect</code> URL is where the user will be redirected after approving or denying a request for authorization. The route will return the updated client instance:</p>
<div class="code-container">
<pre><code data-theme="olaolu-palenight" data-lang="js" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">const</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">data</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">    name: </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">New Client Name</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    redirect: </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">http://example.com/callback</span><span style="color: #D9F5DD;">&#39;</span></div><div class='line'><span style="color: #BFC7D5;">};</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BFC7D5;">axios</span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">put</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/oauth/clients/</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">+</span><span style="color: #BFC7D5;"> clientId, data)</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">then</span><span style="color: #BFC7D5;">(</span><span style="color: #7986E7;">response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">        console</span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">log</span><span style="color: #BFC7D5;">(response</span><span style="color: #C792EA;">.</span><span style="color: #89DDFF;">data</span><span style="color: #BFC7D5;">);</span></div><div class='line'><span style="color: #BFC7D5;">    })</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">catch</span><span style="color: #BFC7D5;"> (</span><span style="color: #7986E7;">response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #697098;">//</span><span style="color: #697098;"> List errors on response...</span></div><div class='line'><span style="color: #BFC7D5;">    });</span></div></code></pre>
</div>
<h4 id="delete-oauthclientsclient-id"><a href="#delete-oauthclientsclient-id"><code>DELETE /oauth/clients/{client-id}</code></a></h4>
<p>This route is used to delete clients:</p>
<div class="code-container">
<pre><code data-theme="olaolu-palenight" data-lang="js" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #BFC7D5;">axios</span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">delete</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/oauth/clients/</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">+</span><span style="color: #BFC7D5;"> clientId)</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">then</span><span style="color: #BFC7D5;">(</span><span style="color: #7986E7;">response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #697098;">//</span><span style="color: #697098;"> ...</span></div><div class='line'><span style="color: #BFC7D5;">    });</span></div></code></pre>
</div>
<h3 id="requesting-tokens"><a href="#requesting-tokens">Requesting Tokens</a></h3>
<h4 id="requesting-tokens-redirecting-for-authorization"><a href="#requesting-tokens-redirecting-for-authorization">Redirecting for Authorization</a></h4>
<p>Once a client has been created, developers may use their client ID and secret to request an authorization code and access token from your application. First, the consuming application should make a redirect request to your application's <code>/oauth/authorize</code> route like so:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Http\</span><span style="color: #FFCB8B;">Request</span><span style="color: #BFC7D5;">;</span></div><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Support\</span><span style="color: #FFCB8B;">Str</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #FFCB8B;">Route</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">get</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/redirect</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">(</span><span style="color: #FFCB8B;">Request</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$request</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$request</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">session</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">put</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">state</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, </span><span style="color: #BEC5D4;">$state</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Str</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">random</span><span style="color: #BFC7D5;">(</span><span style="color: #F78C6C;">40</span><span style="color: #BFC7D5;">));</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$query</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">http_build_query</span><span style="color: #BFC7D5;">([</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client_id</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #82AAFF;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #82AAFF;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client-id</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">redirect_uri</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #82AAFF;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #82AAFF;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">http://third-party-app.com/callback</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">response_type</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #82AAFF;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #82AAFF;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">code</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">scope</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #82AAFF;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #82AAFF;"> </span><span style="color: #D9F5DD;">&#39;&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">state</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #82AAFF;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #82AAFF;"> </span><span style="color: #BFC7D5;">$</span><span style="color: #BEC5D4;">state</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">        //</span><span style="color: #697098;"> &#39;prompt&#39; =&gt; &#39;&#39;, // &quot;none&quot;, &quot;consent&quot;, or &quot;login&quot;</span></div><div class='line'><span style="color: #82AAFF;">    </span><span style="color: #BFC7D5;">]);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">redirect</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">http://passport-app.test/oauth/authorize?</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #89DDFF;">.</span><span style="color: #BFC7D5;">$</span><span style="color: #BEC5D4;">query</span><span style="color: #BFC7D5;">);</span></div><div class='line'><span style="color: #BFC7D5;">});</span></div></code></pre>
<p>The <code>prompt</code> parameter may be used to specify the authentication behavior of the Passport application.</p>
<p>If the <code>prompt</code> value is <code>none</code>, Passport will always throw an authentication error if the user is not already authenticated with the Passport application. If the value is <code>consent</code>, Passport will always display the authorization approval screen, even if all scopes were previously granted to the consuming application. When the value is <code>login</code>, the Passport application will always prompt the user to re-login to the application, even if they already have an existing session.</p>
<p>If no <code>prompt</code> value is provided, the user will be prompted for authorization only if they have not previously authorized access to the consuming application for the requested scopes.</p>
<div class="mb-10 max-w-2xl mx-auto px-4 py-8 shadow-lg lg:flex lg:items-center callout">
    <div class="w-20 h-20 mb-6 flex items-center justify-center shrink-0 lg:mb-0 bg-purple-600">
        <div class="opacity-75"><svg width="28" height="40" viewBox="0 0 28 40" xmlns="http://www.w3.org/2000/svg"><title>lightbulb</title><path d="M12 28h4v-8h-4v8zM8 40h12v-8H8v8zm13.98-14.52c-1.001.705-1.661 1.545-1.98 2.52H8c-.416-.959-1.076-1.799-1.98-2.52A13.99 13.99 0 0 1 0 14C0 6.272 6.272 0 14 0s14 6.272 14 14a13.99 13.99 0 0 1-6.02 11.48z" fill="#FFF" fill-rule="nonzero"/></svg></div>
    </div>
    <p class="mb-0 lg:ml-6 callout">
Remember, the <code>/oauth/authorize</code> route is already defined by Passport. You do not need to manually define this route.</p>
</div>
<h4 id="approving-the-request"><a href="#approving-the-request">Approving the Request</a></h4>
<p>When receiving authorization requests, Passport will automatically respond based on the value of <code>prompt</code> parameter (if present) and may display a template to the user allowing them to approve or deny the authorization request. If they approve the request, they will be redirected back to the <code>redirect_uri</code> that was specified by the consuming application. The <code>redirect_uri</code> must match the <code>redirect</code> URL that was specified when the client was created.</p>
<p>If you would like to customize the authorization approval screen, you may publish Passport's views using the <code>vendor:publish</code> Artisan command. The published views will be placed in the <code>resources/views/vendor/passport</code> directory:</p>
<div class="code-container">
<pre><code data-theme="olaolu-palenight" data-lang="shell" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">vendor:publish</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">--tag=passport-views</span></div></code></pre>
</div>
<p>Sometimes you may wish to skip the authorization prompt, such as when authorizing a first-party client. You may accomplish this by <a href="#overriding-default-models">extending the <code>Client</code> model</a> and defining a <code>skipsAuthorization</code> method. If <code>skipsAuthorization</code> returns <code>true</code> the client will be approved and the user will be redirected back to the <code>redirect_uri</code> immediately, unless the consuming application has explicitly set the <code>prompt</code> parameter when redirecting for authorization:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #D3423E;">&lt;?php</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #C792EA;">namespace</span><span style="color: #BFC7D5;"> App\Models\Passport;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Laravel\Passport\</span><span style="color: #FFCB8B;">Client</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">as</span><span style="color: #BFC7D5;"> BaseClient;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">Client</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">BaseClient</span></div><div class='line'><span style="color: #BFC7D5;">{</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #697098;">/**</span></div><div class='line'><span style="color: #697098;">     * Determine if the client should skip the authorization prompt.</span></div><div class='line'><span style="color: #697098;">     </span><span style="color: #697098;">*/</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">skipsAuthorization</span><span style="color: #D9F5DD;">()</span><span style="color: #89DDFF;">:</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">bool</span></div><div class='line'><span style="color: #BFC7D5;">    {</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #FF5572;">$this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">firstParty</span><span style="color: #BFC7D5;">();</span></div><div class='line'><span style="color: #BFC7D5;">    }</span></div><div class='line'><span style="color: #BFC7D5;">}</span></div></code></pre>
<h4 id="requesting-tokens-converting-authorization-codes-to-access-tokens"><a href="#requesting-tokens-converting-authorization-codes-to-access-tokens">Converting Authorization Codes to Access Tokens</a></h4>
<p>If the user approves the authorization request, they will be redirected back to the consuming application. The consumer should first verify the <code>state</code> parameter against the value that was stored prior to the redirect. If the state parameter matches then the consumer should issue a <code>POST</code> request to your application to request an access token. The request should include the authorization code that was issued by your application when the user approved the authorization request:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Http\</span><span style="color: #FFCB8B;">Request</span><span style="color: #BFC7D5;">;</span></div><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Support\Facades\</span><span style="color: #FFCB8B;">Http</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #FFCB8B;">Route</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">get</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/callback</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">(</span><span style="color: #FFCB8B;">Request</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$request</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$state</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$request</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">session</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">pull</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">state</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #82AAFF;">throw_unless</span><span style="color: #BFC7D5;">(</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #89DDFF;">strlen</span><span style="color: #BFC7D5;">($</span><span style="color: #BEC5D4;">state</span><span style="color: #BFC7D5;">)</span><span style="color: #82AAFF;"> </span><span style="color: #C792EA;">&gt;</span><span style="color: #82AAFF;"> </span><span style="color: #F78C6C;">0</span><span style="color: #82AAFF;"> </span><span style="color: #C792EA;">&amp;&amp;</span><span style="color: #82AAFF;"> </span><span style="color: #BFC7D5;">$</span><span style="color: #BEC5D4;">state</span><span style="color: #82AAFF;"> </span><span style="color: #C792EA;">===</span><span style="color: #82AAFF;"> </span><span style="color: #BFC7D5;">$</span><span style="color: #BEC5D4;">request</span><span style="color: #89DDFF;">-&gt;state</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #FFCB6B;">InvalidArgumentException</span><span style="color: #89DDFF;">::</span><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">Invalid state value.</span><span style="color: #D9F5DD;">&#39;</span></div><div class='line'><span style="color: #82AAFF;">    </span><span style="color: #BFC7D5;">);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Http</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">asForm</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">post</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">http://passport-app.test/oauth/token</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, [</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">grant_type</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">authorization_code</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client_id</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client-id</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client_secret</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client-secret</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">redirect_uri</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">http://third-party-app.com/callback</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">code</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$request</span><span style="color: #89DDFF;">-&gt;code</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    ]);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$response</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">json</span><span style="color: #BFC7D5;">();</span></div><div class='line'><span style="color: #BFC7D5;">});</span></div></code></pre>
<p>This <code>/oauth/token</code> route will return a JSON response containing <code>access_token</code>, <code>refresh_token</code>, and <code>expires_in</code> attributes. The <code>expires_in</code> attribute contains the number of seconds until the access token expires.</p>
<div class="mb-10 max-w-2xl mx-auto px-4 py-8 shadow-lg lg:flex lg:items-center callout">
    <div class="w-20 h-20 mb-6 flex items-center justify-center shrink-0 lg:mb-0 bg-purple-600">
        <div class="opacity-75"><svg width="28" height="40" viewBox="0 0 28 40" xmlns="http://www.w3.org/2000/svg"><title>lightbulb</title><path d="M12 28h4v-8h-4v8zM8 40h12v-8H8v8zm13.98-14.52c-1.001.705-1.661 1.545-1.98 2.52H8c-.416-.959-1.076-1.799-1.98-2.52A13.99 13.99 0 0 1 0 14C0 6.272 6.272 0 14 0s14 6.272 14 14a13.99 13.99 0 0 1-6.02 11.48z" fill="#FFF" fill-rule="nonzero"/></svg></div>
    </div>
    <p class="mb-0 lg:ml-6 callout">
Like the <code>/oauth/authorize</code> route, the <code>/oauth/token</code> route is defined for you by Passport. There is no need to manually define this route.</p>
</div>
<h4 id="tokens-json-api"><a href="#tokens-json-api">JSON API</a></h4>
<p>Passport also includes a JSON API for managing authorized access tokens. You may pair this with your own frontend to offer your users a dashboard for managing access tokens. For convenience, we'll use <a href="https://github.com/mzabriskie/axios">Axios</a> to demonstrate making HTTP requests to the endpoints. The JSON API is guarded by the <code>web</code> and <code>auth</code> middleware; therefore, it may only be called from your own application.</p>
<h4 id="get-oauthtokens"><a href="#get-oauthtokens"><code>GET /oauth/tokens</code></a></h4>
<p>This route returns all of the authorized access tokens that the authenticated user has created. This is primarily useful for listing all of the user's tokens so that they can revoke them:</p>
<div class="code-container">
<pre><code data-theme="olaolu-palenight" data-lang="js" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #BFC7D5;">axios</span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">get</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/oauth/tokens</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">)</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">then</span><span style="color: #BFC7D5;">(</span><span style="color: #7986E7;">response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">        console</span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">log</span><span style="color: #BFC7D5;">(response</span><span style="color: #C792EA;">.</span><span style="color: #89DDFF;">data</span><span style="color: #BFC7D5;">);</span></div><div class='line'><span style="color: #BFC7D5;">    });</span></div></code></pre>
</div>
<h4 id="delete-oauthtokenstoken-id"><a href="#delete-oauthtokenstoken-id"><code>DELETE /oauth/tokens/{token-id}</code></a></h4>
<p>This route may be used to revoke authorized access tokens and their related refresh tokens:</p>
<div class="code-container">
<pre><code data-theme="olaolu-palenight" data-lang="js" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #BFC7D5;">axios</span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">delete</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/oauth/tokens/</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">+</span><span style="color: #BFC7D5;"> tokenId);</span></div></code></pre>
</div>
<h3 id="refreshing-tokens"><a href="#refreshing-tokens">Refreshing Tokens</a></h3>
<p>If your application issues short-lived access tokens, users will need to refresh their access tokens via the refresh token that was provided to them when the access token was issued:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Support\Facades\</span><span style="color: #FFCB8B;">Http</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BEC5D4;">$response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Http</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">asForm</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">post</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">http://passport-app.test/oauth/token</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, [</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">grant_type</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">refresh_token</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">refresh_token</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">the-refresh-token</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client_id</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client-id</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client_secret</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client-secret</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">scope</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">]);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$response</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">json</span><span style="color: #BFC7D5;">();</span></div></code></pre>
<p>This <code>/oauth/token</code> route will return a JSON response containing <code>access_token</code>, <code>refresh_token</code>, and <code>expires_in</code> attributes. The <code>expires_in</code> attribute contains the number of seconds until the access token expires.</p>
<h3 id="revoking-tokens"><a href="#revoking-tokens">Revoking Tokens</a></h3>
<p>You may revoke a token by using the <code>revokeAccessToken</code> method on the <code>Laravel\Passport\TokenRepository</code>. You may revoke a token's refresh tokens using the <code>revokeRefreshTokensByAccessTokenId</code> method on the <code>Laravel\Passport\RefreshTokenRepository</code>. These classes may be resolved using Laravel's <a href="container.html">service container</a>:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Laravel\Passport\</span><span style="color: #FFCB8B;">TokenRepository</span><span style="color: #BFC7D5;">;</span></div><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Laravel\Passport\</span><span style="color: #FFCB8B;">RefreshTokenRepository</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BEC5D4;">$tokenRepository</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">app</span><span style="color: #BFC7D5;">(</span><span style="color: #FFCB8B;">TokenRepository</span><span style="color: #89DDFF;">::</span><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;">);</span></div><div class='line'><span style="color: #BEC5D4;">$refreshTokenRepository</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">app</span><span style="color: #BFC7D5;">(</span><span style="color: #FFCB8B;">RefreshTokenRepository</span><span style="color: #89DDFF;">::</span><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;">);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #697098;">//</span><span style="color: #697098;"> Revoke an access token...</span></div><div class='line'><span style="color: #BEC5D4;">$tokenRepository</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">revokeAccessToken</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$tokenId</span><span style="color: #BFC7D5;">);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #697098;">//</span><span style="color: #697098;"> Revoke all of the token&#39;s refresh tokens...</span></div><div class='line'><span style="color: #BEC5D4;">$refreshTokenRepository</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">revokeRefreshTokensByAccessTokenId</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$tokenId</span><span style="color: #BFC7D5;">);</span></div></code></pre>
<h3 id="purging-tokens"><a href="#purging-tokens">Purging Tokens</a></h3>
<p>When tokens have been revoked or expired, you might want to purge them from the database. Passport's included <code>passport:purge</code> Artisan command can do this for you:</p>
<div class="code-container">
<pre><code data-theme="olaolu-palenight" data-lang="shell" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #697098;">#</span><span style="color: #697098;"> Purge revoked and expired tokens and auth codes...</span></div><div class='line'><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">passport:purge</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #697098;">#</span><span style="color: #697098;"> Only purge tokens expired for more than 6 hours...</span></div><div class='line'><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">passport:purge</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">--hours=6</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #697098;">#</span><span style="color: #697098;"> Only purge revoked tokens and auth codes...</span></div><div class='line'><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">passport:purge</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">--revoked</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #697098;">#</span><span style="color: #697098;"> Only purge expired tokens and auth codes...</span></div><div class='line'><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">passport:purge</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">--expired</span></div></code></pre>
</div>
<p>You may also configure a <a href="scheduling.html">scheduled job</a> in your application's <code>routes/console.php</code> file to automatically prune your tokens on a schedule:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Support\Facades\</span><span style="color: #FFCB8B;">Schedule</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #FFCB8B;">Schedule</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">command</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">passport:purge</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">)</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">hourly</span><span style="color: #BFC7D5;">();</span></div></code></pre>
<h2 id="code-grant-pkce"><a href="#code-grant-pkce">Authorization Code Grant With PKCE</a></h2>
<p>The Authorization Code grant with &quot;Proof Key for Code Exchange&quot; (PKCE) is a secure way to authenticate single page applications or native applications to access your API. This grant should be used when you can't guarantee that the client secret will be stored confidentially or in order to mitigate the threat of having the authorization code intercepted by an attacker. A combination of a &quot;code verifier&quot; and a &quot;code challenge&quot; replaces the client secret when exchanging the authorization code for an access token.</p>
<h3 id="creating-a-auth-pkce-grant-client"><a href="#creating-a-auth-pkce-grant-client">Creating the Client</a></h3>
<p>Before your application can issue tokens via the authorization code grant with PKCE, you will need to create a PKCE-enabled client. You may do this using the <code>passport:client</code> Artisan command with the <code>--public</code> option:</p>
<div class="code-container">
<pre><code data-theme="olaolu-palenight" data-lang="shell" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">passport:client</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">--public</span></div></code></pre>
</div>
<h3 id="requesting-auth-pkce-grant-tokens"><a href="#requesting-auth-pkce-grant-tokens">Requesting Tokens</a></h3>
<h4 id="code-verifier-code-challenge"><a href="#code-verifier-code-challenge">Code Verifier and Code Challenge</a></h4>
<p>As this authorization grant does not provide a client secret, developers will need to generate a combination of a code verifier and a code challenge in order to request a token.</p>
<p>The code verifier should be a random string of between 43 and 128 characters containing letters, numbers, and  <code>&quot;-&quot;</code>, <code>&quot;.&quot;</code>, <code>&quot;_&quot;</code>, <code>&quot;~&quot;</code> characters, as defined in the <a href="https://tools.ietf.org/html/rfc7636">RFC 7636 specification</a>.</p>
<p>The code challenge should be a Base64 encoded string with URL and filename-safe characters. The trailing <code>'='</code> characters should be removed and no line breaks, whitespace, or other additional characters should be present.</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #BEC5D4;">$encoded</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">base64_encode</span><span style="color: #BFC7D5;">(</span><span style="color: #89DDFF;">hash</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">sha256</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span><span style="color: #82AAFF;"> </span><span style="color: #BFC7D5;">$</span><span style="color: #BEC5D4;">code_verifier</span><span style="color: #BFC7D5;">,</span><span style="color: #82AAFF;"> true</span><span style="color: #BFC7D5;">));</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BEC5D4;">$codeChallenge</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">strtr</span><span style="color: #BFC7D5;">(</span><span style="color: #89DDFF;">rtrim</span><span style="color: #BFC7D5;">($</span><span style="color: #BEC5D4;">encoded</span><span style="color: #BFC7D5;">,</span><span style="color: #82AAFF;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">=</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">),</span><span style="color: #82AAFF;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">+/</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span><span style="color: #82AAFF;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">-_</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">);</span></div></code></pre>
<h4 id="code-grant-pkce-redirecting-for-authorization"><a href="#code-grant-pkce-redirecting-for-authorization">Redirecting for Authorization</a></h4>
<p>Once a client has been created, you may use the client ID and the generated code verifier and code challenge to request an authorization code and access token from your application. First, the consuming application should make a redirect request to your application's <code>/oauth/authorize</code> route:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Http\</span><span style="color: #FFCB8B;">Request</span><span style="color: #BFC7D5;">;</span></div><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Support\</span><span style="color: #FFCB8B;">Str</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #FFCB8B;">Route</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">get</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/redirect</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">(</span><span style="color: #FFCB8B;">Request</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$request</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$request</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">session</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">put</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">state</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, </span><span style="color: #BEC5D4;">$state</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Str</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">random</span><span style="color: #BFC7D5;">(</span><span style="color: #F78C6C;">40</span><span style="color: #BFC7D5;">));</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$request</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">session</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">put</span><span style="color: #BFC7D5;">(</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">code_verifier</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, </span><span style="color: #BEC5D4;">$code_verifier</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Str</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">random</span><span style="color: #BFC7D5;">(</span><span style="color: #F78C6C;">128</span><span style="color: #BFC7D5;">)</span></div><div class='line'><span style="color: #BFC7D5;">    );</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$codeChallenge</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">strtr</span><span style="color: #BFC7D5;">(</span><span style="color: #89DDFF;">rtrim</span><span style="color: #BFC7D5;">(</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #89DDFF;">base64_encode</span><span style="color: #BFC7D5;">(</span><span style="color: #89DDFF;">hash</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">sha256</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span><span style="color: #82AAFF;"> </span><span style="color: #BFC7D5;">$</span><span style="color: #BEC5D4;">code_verifier</span><span style="color: #BFC7D5;">,</span><span style="color: #82AAFF;"> true</span><span style="color: #BFC7D5;">))</span></div><div class='line'><span style="color: #82AAFF;">    </span><span style="color: #BFC7D5;">,</span><span style="color: #82AAFF;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">=</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">),</span><span style="color: #82AAFF;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">+/</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span><span style="color: #82AAFF;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">-_</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$query</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">http_build_query</span><span style="color: #BFC7D5;">([</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client_id</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #82AAFF;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #82AAFF;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client-id</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">redirect_uri</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #82AAFF;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #82AAFF;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">http://third-party-app.com/callback</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">response_type</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #82AAFF;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #82AAFF;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">code</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">scope</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #82AAFF;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #82AAFF;"> </span><span style="color: #D9F5DD;">&#39;&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">state</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #82AAFF;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #82AAFF;"> </span><span style="color: #BFC7D5;">$</span><span style="color: #BEC5D4;">state</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">code_challenge</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #82AAFF;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #82AAFF;"> </span><span style="color: #BFC7D5;">$</span><span style="color: #BEC5D4;">codeChallenge</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">code_challenge_method</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #82AAFF;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #82AAFF;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">S256</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">        //</span><span style="color: #697098;"> &#39;prompt&#39; =&gt; &#39;&#39;, // &quot;none&quot;, &quot;consent&quot;, or &quot;login&quot;</span></div><div class='line'><span style="color: #82AAFF;">    </span><span style="color: #BFC7D5;">]);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">redirect</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">http://passport-app.test/oauth/authorize?</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #89DDFF;">.</span><span style="color: #BFC7D5;">$</span><span style="color: #BEC5D4;">query</span><span style="color: #BFC7D5;">);</span></div><div class='line'><span style="color: #BFC7D5;">});</span></div></code></pre>
<h4 id="code-grant-pkce-converting-authorization-codes-to-access-tokens"><a href="#code-grant-pkce-converting-authorization-codes-to-access-tokens">Converting Authorization Codes to Access Tokens</a></h4>
<p>If the user approves the authorization request, they will be redirected back to the consuming application. The consumer should verify the <code>state</code> parameter against the value that was stored prior to the redirect, as in the standard Authorization Code Grant.</p>
<p>If the state parameter matches, the consumer should issue a <code>POST</code> request to your application to request an access token. The request should include the authorization code that was issued by your application when the user approved the authorization request along with the originally generated code verifier:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Http\</span><span style="color: #FFCB8B;">Request</span><span style="color: #BFC7D5;">;</span></div><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Support\Facades\</span><span style="color: #FFCB8B;">Http</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #FFCB8B;">Route</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">get</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/callback</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">(</span><span style="color: #FFCB8B;">Request</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$request</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$state</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$request</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">session</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">pull</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">state</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$codeVerifier</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$request</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">session</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">pull</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">code_verifier</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #82AAFF;">throw_unless</span><span style="color: #BFC7D5;">(</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #89DDFF;">strlen</span><span style="color: #BFC7D5;">($</span><span style="color: #BEC5D4;">state</span><span style="color: #BFC7D5;">)</span><span style="color: #82AAFF;"> </span><span style="color: #C792EA;">&gt;</span><span style="color: #82AAFF;"> </span><span style="color: #F78C6C;">0</span><span style="color: #82AAFF;"> </span><span style="color: #C792EA;">&amp;&amp;</span><span style="color: #82AAFF;"> </span><span style="color: #BFC7D5;">$</span><span style="color: #BEC5D4;">state</span><span style="color: #82AAFF;"> </span><span style="color: #C792EA;">===</span><span style="color: #82AAFF;"> </span><span style="color: #BFC7D5;">$</span><span style="color: #BEC5D4;">request</span><span style="color: #89DDFF;">-&gt;state</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #FFCB6B;">InvalidArgumentException</span><span style="color: #89DDFF;">::</span><span style="color: #C792EA;">class</span></div><div class='line'><span style="color: #82AAFF;">    </span><span style="color: #BFC7D5;">);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Http</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">asForm</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">post</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">http://passport-app.test/oauth/token</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, [</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">grant_type</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">authorization_code</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client_id</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client-id</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">redirect_uri</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">http://third-party-app.com/callback</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">code_verifier</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$codeVerifier</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">code</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$request</span><span style="color: #89DDFF;">-&gt;code</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    ]);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$response</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">json</span><span style="color: #BFC7D5;">();</span></div><div class='line'><span style="color: #BFC7D5;">});</span></div></code></pre>
<h2 id="password-grant-tokens"><a href="#password-grant-tokens">Password Grant Tokens</a></h2>
<div class="mb-10 max-w-2xl mx-auto px-4 py-8 shadow-lg lg:flex lg:items-center callout">
    <div class="w-20 h-20 mb-6 flex items-center justify-center shrink-0 lg:mb-0 bg-red-600">
        <div class="opacity-75"><svg width="6" height="35" viewBox="0 0 6 35" xmlns="http://www.w3.org/2000/svg"><title>exclamation</title><path d="M0 29h6v6H0v-6zM0 0h6v24H0V0z" fill="#FFF" fill-rule="nonzero"/></svg>
</div>
    </div>
    <p class="mb-0 lg:ml-6 callout">
We no longer recommend using password grant tokens. Instead, you should choose <a href="https://oauth2.thephpleague.com/authorization-server/which-grant/">a grant type that is currently recommended by OAuth2 Server</a>.</p>
</div>
<p>The OAuth2 password grant allows your other first-party clients, such as a mobile application, to obtain an access token using an email address / username and password. This allows you to issue access tokens securely to your first-party clients without requiring your users to go through the entire OAuth2 authorization code redirect flow.</p>
<p>To enable the password grant, call the <code>enablePasswordGrant</code> method in the <code>boot</code> method of your application's <code>App\Providers\AppServiceProvider</code> class:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #697098;">/**</span></div><div class='line'><span style="color: #697098;"> * Bootstrap any application services.</span></div><div class='line'><span style="color: #697098;"> </span><span style="color: #697098;">*/</span></div><div class='line'><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">boot</span><span style="color: #D9F5DD;">()</span><span style="color: #89DDFF;">:</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">void</span></div><div class='line'><span style="color: #BFC7D5;">{</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #FFCB8B;">Passport</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">enablePasswordGrant</span><span style="color: #BFC7D5;">();</span></div><div class='line'><span style="color: #BFC7D5;">}</span></div></code></pre>
<h3 id="creating-a-password-grant-client"><a href="#creating-a-password-grant-client">Creating a Password Grant Client</a></h3>
<p>Before your application can issue tokens via the password grant, you will need to create a password grant client. You may do this using the <code>passport:client</code> Artisan command with the <code>--password</code> option. <strong>If you have already run the <code>passport:install</code> command, you do not need to run this command:</strong></p>
<div class="code-container">
<pre><code data-theme="olaolu-palenight" data-lang="shell" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">passport:client</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">--password</span></div></code></pre>
</div>
<h3 id="requesting-password-grant-tokens"><a href="#requesting-password-grant-tokens">Requesting Tokens</a></h3>
<p>Once you have created a password grant client, you may request an access token by issuing a <code>POST</code> request to the <code>/oauth/token</code> route with the user's email address and password. Remember, this route is already registered by Passport so there is no need to define it manually. If the request is successful, you will receive an <code>access_token</code> and <code>refresh_token</code> in the JSON response from the server:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Support\Facades\</span><span style="color: #FFCB8B;">Http</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BEC5D4;">$response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Http</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">asForm</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">post</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">http://passport-app.test/oauth/token</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, [</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">grant_type</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">password</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client_id</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client-id</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client_secret</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client-secret</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">username</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;"><a href="https://laravel.com/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="f18590889d9e83b19d90839087949ddf929e9c">[email&#160;protected]</a></span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">password</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">my-password</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">scope</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">]);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$response</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">json</span><span style="color: #BFC7D5;">();</span></div></code></pre>
<div class="mb-10 max-w-2xl mx-auto px-4 py-8 shadow-lg lg:flex lg:items-center callout">
    <div class="w-20 h-20 mb-6 flex items-center justify-center shrink-0 lg:mb-0 bg-purple-600">
        <div class="opacity-75"><svg width="28" height="40" viewBox="0 0 28 40" xmlns="http://www.w3.org/2000/svg"><title>lightbulb</title><path d="M12 28h4v-8h-4v8zM8 40h12v-8H8v8zm13.98-14.52c-1.001.705-1.661 1.545-1.98 2.52H8c-.416-.959-1.076-1.799-1.98-2.52A13.99 13.99 0 0 1 0 14C0 6.272 6.272 0 14 0s14 6.272 14 14a13.99 13.99 0 0 1-6.02 11.48z" fill="#FFF" fill-rule="nonzero"/></svg></div>
    </div>
    <p class="mb-0 lg:ml-6 callout">
Remember, access tokens are long-lived by default. However, you are free to <a href="#configuration">configure your maximum access token lifetime</a> if needed.</p>
</div>
<h3 id="requesting-all-scopes"><a href="#requesting-all-scopes">Requesting All Scopes</a></h3>
<p>When using the password grant or client credentials grant, you may wish to authorize the token for all of the scopes supported by your application. You can do this by requesting the <code>*</code> scope. If you request the <code>*</code> scope, the <code>can</code> method on the token instance will always return <code>true</code>. This scope may only be assigned to a token that is issued using the <code>password</code> or <code>client_credentials</code> grant:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Support\Facades\</span><span style="color: #FFCB8B;">Http</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BEC5D4;">$response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Http</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">asForm</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">post</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">http://passport-app.test/oauth/token</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, [</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">grant_type</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">password</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client_id</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client-id</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client_secret</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client-secret</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">username</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;"><a href="https://laravel.com/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="116570687d7e63517d70637067747d3f727e7c">[email&#160;protected]</a></span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">password</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">my-password</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">scope</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">*</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">]);</span></div></code></pre>
<h3 id="customizing-the-user-provider"><a href="#customizing-the-user-provider">Customizing the User Provider</a></h3>
<p>If your application uses more than one <a href="authentication.html#introduction">authentication user provider</a>, you may specify which user provider the password grant client uses by providing a <code>--provider</code> option when creating the client via the <code>artisan passport:client --password</code> command. The given provider name should match a valid provider defined in your application's <code>config/auth.php</code> configuration file. You can then <a href="#via-middleware">protect your route using middleware</a> to ensure that only users from the guard's specified provider are authorized.</p>
<h3 id="customizing-the-username-field"><a href="#customizing-the-username-field">Customizing the Username Field</a></h3>
<p>When authenticating using the password grant, Passport will use the <code>email</code> attribute of your authenticatable model as the &quot;username&quot;. However, you may customize this behavior by defining a <code>findForPassport</code> method on your model:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #D3423E;">&lt;?php</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #C792EA;">namespace</span><span style="color: #BFC7D5;"> App\Models;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Foundation\Auth\</span><span style="color: #FFCB8B;">User</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">as</span><span style="color: #BFC7D5;"> Authenticatable;</span></div><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Notifications\</span><span style="color: #FFCB8B;">Notifiable</span><span style="color: #BFC7D5;">;</span></div><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Laravel\Passport\</span><span style="color: #FFCB8B;">HasApiTokens</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">User</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">Authenticatable</span></div><div class='line'><span style="color: #BFC7D5;">{</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">HasApiTokens</span><span style="color: #BFC7D5;">, </span><span style="color: #FFCB8B;">Notifiable</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #697098;">/**</span></div><div class='line'><span style="color: #697098;">     * Find the user instance for the given username.</span></div><div class='line'><span style="color: #697098;">     </span><span style="color: #697098;">*/</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">findForPassport</span><span style="color: #D9F5DD;">(</span><span style="color: #C792EA;">string</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$username</span><span style="color: #D9F5DD;">)</span><span style="color: #89DDFF;">:</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">User</span></div><div class='line'><span style="color: #BFC7D5;">    {</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #FF5572;">$this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">where</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">username</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, </span><span style="color: #BEC5D4;">$username</span><span style="color: #BFC7D5;">)</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">first</span><span style="color: #BFC7D5;">();</span></div><div class='line'><span style="color: #BFC7D5;">    }</span></div><div class='line'><span style="color: #BFC7D5;">}</span></div></code></pre>
<h3 id="customizing-the-password-validation"><a href="#customizing-the-password-validation">Customizing the Password Validation</a></h3>
<p>When authenticating using the password grant, Passport will use the <code>password</code> attribute of your model to validate the given password. If your model does not have a <code>password</code> attribute or you wish to customize the password validation logic, you can define a <code>validateForPassportPasswordGrant</code> method on your model:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #D3423E;">&lt;?php</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #C792EA;">namespace</span><span style="color: #BFC7D5;"> App\Models;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Foundation\Auth\</span><span style="color: #FFCB8B;">User</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">as</span><span style="color: #BFC7D5;"> Authenticatable;</span></div><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Notifications\</span><span style="color: #FFCB8B;">Notifiable</span><span style="color: #BFC7D5;">;</span></div><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Support\Facades\</span><span style="color: #FFCB8B;">Hash</span><span style="color: #BFC7D5;">;</span></div><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Laravel\Passport\</span><span style="color: #FFCB8B;">HasApiTokens</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB6B;">User</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">extends</span><span style="color: #BFC7D5;"> </span><span style="color: #A9C77D;">Authenticatable</span></div><div class='line'><span style="color: #BFC7D5;">{</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">HasApiTokens</span><span style="color: #BFC7D5;">, </span><span style="color: #FFCB8B;">Notifiable</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #697098;">/**</span></div><div class='line'><span style="color: #697098;">     * Validate the password of the user for the Passport password grant.</span></div><div class='line'><span style="color: #697098;">     </span><span style="color: #697098;">*/</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">validateForPassportPasswordGrant</span><span style="color: #D9F5DD;">(</span><span style="color: #C792EA;">string</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$password</span><span style="color: #D9F5DD;">)</span><span style="color: #89DDFF;">:</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">bool</span></div><div class='line'><span style="color: #BFC7D5;">    {</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Hash</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">check</span><span style="color: #BFC7D5;">(</span><span style="color: #BEC5D4;">$password</span><span style="color: #BFC7D5;">, </span><span style="color: #FF5572;">$this</span><span style="color: #89DDFF;">-&gt;password</span><span style="color: #BFC7D5;">);</span></div><div class='line'><span style="color: #BFC7D5;">    }</span></div><div class='line'><span style="color: #BFC7D5;">}</span></div></code></pre>
<h2 id="implicit-grant-tokens"><a href="#implicit-grant-tokens">Implicit Grant Tokens</a></h2>
<div class="mb-10 max-w-2xl mx-auto px-4 py-8 shadow-lg lg:flex lg:items-center callout">
    <div class="w-20 h-20 mb-6 flex items-center justify-center shrink-0 lg:mb-0 bg-red-600">
        <div class="opacity-75"><svg width="6" height="35" viewBox="0 0 6 35" xmlns="http://www.w3.org/2000/svg"><title>exclamation</title><path d="M0 29h6v6H0v-6zM0 0h6v24H0V0z" fill="#FFF" fill-rule="nonzero"/></svg>
</div>
    </div>
    <p class="mb-0 lg:ml-6 callout">
We no longer recommend using implicit grant tokens. Instead, you should choose <a href="https://oauth2.thephpleague.com/authorization-server/which-grant/">a grant type that is currently recommended by OAuth2 Server</a>.</p>
</div>
<p>The implicit grant is similar to the authorization code grant; however, the token is returned to the client without exchanging an authorization code. This grant is most commonly used for JavaScript or mobile applications where the client credentials can't be securely stored. To enable the grant, call the <code>enableImplicitGrant</code> method in the <code>boot</code> method of your application's <code>App\Providers\AppServiceProvider</code> class:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #697098;">/**</span></div><div class='line'><span style="color: #697098;"> * Bootstrap any application services.</span></div><div class='line'><span style="color: #697098;"> </span><span style="color: #697098;">*/</span></div><div class='line'><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">boot</span><span style="color: #D9F5DD;">()</span><span style="color: #89DDFF;">:</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">void</span></div><div class='line'><span style="color: #BFC7D5;">{</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #FFCB8B;">Passport</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">enableImplicitGrant</span><span style="color: #BFC7D5;">();</span></div><div class='line'><span style="color: #BFC7D5;">}</span></div></code></pre>
<p>Once the grant has been enabled, developers may use their client ID to request an access token from your application. The consuming application should make a redirect request to your application's <code>/oauth/authorize</code> route like so:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Http\</span><span style="color: #FFCB8B;">Request</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #FFCB8B;">Route</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">get</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/redirect</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">(</span><span style="color: #FFCB8B;">Request</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$request</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$request</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">session</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">put</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">state</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, </span><span style="color: #BEC5D4;">$state</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Str</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">random</span><span style="color: #BFC7D5;">(</span><span style="color: #F78C6C;">40</span><span style="color: #BFC7D5;">));</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$query</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">http_build_query</span><span style="color: #BFC7D5;">([</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client_id</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #82AAFF;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #82AAFF;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client-id</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">redirect_uri</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #82AAFF;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #82AAFF;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">http://third-party-app.com/callback</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">response_type</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #82AAFF;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #82AAFF;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">token</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">scope</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #82AAFF;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #82AAFF;"> </span><span style="color: #D9F5DD;">&#39;&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">state</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #82AAFF;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #82AAFF;"> </span><span style="color: #BFC7D5;">$</span><span style="color: #BEC5D4;">state</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">        //</span><span style="color: #697098;"> &#39;prompt&#39; =&gt; &#39;&#39;, // &quot;none&quot;, &quot;consent&quot;, or &quot;login&quot;</span></div><div class='line'><span style="color: #82AAFF;">    </span><span style="color: #BFC7D5;">]);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">redirect</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">http://passport-app.test/oauth/authorize?</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #89DDFF;">.</span><span style="color: #BFC7D5;">$</span><span style="color: #BEC5D4;">query</span><span style="color: #BFC7D5;">);</span></div><div class='line'><span style="color: #BFC7D5;">});</span></div></code></pre>
<div class="mb-10 max-w-2xl mx-auto px-4 py-8 shadow-lg lg:flex lg:items-center callout">
    <div class="w-20 h-20 mb-6 flex items-center justify-center shrink-0 lg:mb-0 bg-purple-600">
        <div class="opacity-75"><svg width="28" height="40" viewBox="0 0 28 40" xmlns="http://www.w3.org/2000/svg"><title>lightbulb</title><path d="M12 28h4v-8h-4v8zM8 40h12v-8H8v8zm13.98-14.52c-1.001.705-1.661 1.545-1.98 2.52H8c-.416-.959-1.076-1.799-1.98-2.52A13.99 13.99 0 0 1 0 14C0 6.272 6.272 0 14 0s14 6.272 14 14a13.99 13.99 0 0 1-6.02 11.48z" fill="#FFF" fill-rule="nonzero"/></svg></div>
    </div>
    <p class="mb-0 lg:ml-6 callout">
Remember, the <code>/oauth/authorize</code> route is already defined by Passport. You do not need to manually define this route.</p>
</div>
<h2 id="client-credentials-grant-tokens"><a href="#client-credentials-grant-tokens">Client Credentials Grant Tokens</a></h2>
<p>The client credentials grant is suitable for machine-to-machine authentication. For example, you might use this grant in a scheduled job which is performing maintenance tasks over an API.</p>
<p>Before your application can issue tokens via the client credentials grant, you will need to create a client credentials grant client. You may do this using the <code>--client</code> option of the <code>passport:client</code> Artisan command:</p>
<div class="code-container">
<pre><code data-theme="olaolu-palenight" data-lang="shell" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">passport:client</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">--client</span></div></code></pre>
</div>
<p>Next, to use this grant type, register a middleware alias for the <code>CheckClientCredentials</code> middleware. You may define middleware aliases in your application's <code>bootstrap/app.php</code> file:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Laravel\Passport\Http\Middleware\</span><span style="color: #FFCB8B;">CheckClientCredentials</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">withMiddleware</span><span style="color: #BFC7D5;">(</span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">(</span><span style="color: #FFCB8B;">Middleware</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$middleware</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$middleware</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">alias</span><span style="color: #BFC7D5;">([</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">CheckClientCredentials</span><span style="color: #89DDFF;">::</span><span style="color: #C792EA;">class</span></div><div class='line'><span style="color: #BFC7D5;">    ]);</span></div><div class='line'><span style="color: #BFC7D5;">})</span></div></code></pre>
<p>Then, attach the middleware to a route:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #FFCB8B;">Route</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">get</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/orders</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">(</span><span style="color: #FFCB8B;">Request</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$request</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #89DDFF;">...</span></div><div class='line'><span style="color: #BFC7D5;">})</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">middleware</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">);</span></div></code></pre>
<p>To restrict access to the route to specific scopes, you may provide a comma-delimited list of the required scopes when attaching the <code>client</code> middleware to the route:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #FFCB8B;">Route</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">get</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/orders</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">(</span><span style="color: #FFCB8B;">Request</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$request</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #89DDFF;">...</span></div><div class='line'><span style="color: #BFC7D5;">})</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">middleware</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client:check-status,your-scope</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">);</span></div></code></pre>
<h3 id="retrieving-tokens"><a href="#retrieving-tokens">Retrieving Tokens</a></h3>
<p>To retrieve a token using this grant type, make a request to the <code>oauth/token</code> endpoint:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Support\Facades\</span><span style="color: #FFCB8B;">Http</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BEC5D4;">$response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Http</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">asForm</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">post</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">http://passport-app.test/oauth/token</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, [</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">grant_type</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client_credentials</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client_id</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client-id</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client_secret</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client-secret</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">scope</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">your-scope</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">]);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$response</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">json</span><span style="color: #BFC7D5;">()[</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">access_token</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">];</span></div></code></pre>
<h2 id="personal-access-tokens"><a href="#personal-access-tokens">Personal Access Tokens</a></h2>
<p>Sometimes, your users may want to issue access tokens to themselves without going through the typical authorization code redirect flow. Allowing users to issue tokens to themselves via your application's UI can be useful for allowing users to experiment with your API or may serve as a simpler approach to issuing access tokens in general.</p>
<div class="mb-10 max-w-2xl mx-auto px-4 py-8 shadow-lg lg:flex lg:items-center callout">
    <div class="w-20 h-20 mb-6 flex items-center justify-center shrink-0 lg:mb-0 bg-purple-600">
        <div class="opacity-75"><svg width="28" height="40" viewBox="0 0 28 40" xmlns="http://www.w3.org/2000/svg"><title>lightbulb</title><path d="M12 28h4v-8h-4v8zM8 40h12v-8H8v8zm13.98-14.52c-1.001.705-1.661 1.545-1.98 2.52H8c-.416-.959-1.076-1.799-1.98-2.52A13.99 13.99 0 0 1 0 14C0 6.272 6.272 0 14 0s14 6.272 14 14a13.99 13.99 0 0 1-6.02 11.48z" fill="#FFF" fill-rule="nonzero"/></svg></div>
    </div>
    <p class="mb-0 lg:ml-6 callout">
If your application is primarily using Passport to issue personal access tokens, consider using <a href="sanctum.html">Laravel Sanctum</a>, Laravel's light-weight first-party library for issuing API access tokens.</p>
</div>
<h3 id="creating-a-personal-access-client"><a href="#creating-a-personal-access-client">Creating a Personal Access Client</a></h3>
<p>Before your application can issue personal access tokens, you will need to create a personal access client. You may do this by executing the <code>passport:client</code> Artisan command with the <code>--personal</code> option. If you have already run the <code>passport:install</code> command, you do not need to run this command:</p>
<div class="code-container">
<pre><code data-theme="olaolu-palenight" data-lang="shell" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #BFC7D5;">php </span><span style="color: #BFC7D5;">artisan</span><span style="color: #BFC7D5;"> </span><span style="color: #BFC7D5;">passport:client</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">--personal</span></div></code></pre>
</div>
<p>After creating your personal access client, place the client's ID and plain-text secret value in your application's <code>.env</code> file:</p>
<div class="code-container">
<pre><code data-theme="olaolu-palenight" data-lang="ini" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">PASSPORT_PERSONAL_ACCESS_CLIENT_ID</span><span style="color: #BFC7D5;">=</span><span style="color: #D9F5DD;">&quot;</span><span style="color: #C3E88D;">client-id-value</span><span style="color: #D9F5DD;">&quot;</span></div><div class='line'><span style="color: #C792EA;">PASSPORT_PERSONAL_ACCESS_CLIENT_SECRET</span><span style="color: #BFC7D5;">=</span><span style="color: #D9F5DD;">&quot;</span><span style="color: #C3E88D;">unhashed-client-secret-value</span><span style="color: #D9F5DD;">&quot;</span></div></code></pre>
</div>
<h3 id="managing-personal-access-tokens"><a href="#managing-personal-access-tokens">Managing Personal Access Tokens</a></h3>
<p>Once you have created a personal access client, you may issue tokens for a given user using the <code>createToken</code> method on the <code>App\Models\User</code> model instance. The <code>createToken</code> method accepts the name of the token as its first argument and an optional array of <a href="#token-scopes">scopes</a> as its second argument:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> App\Models\</span><span style="color: #FFCB8B;">User</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BEC5D4;">$user</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">User</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">find</span><span style="color: #BFC7D5;">(</span><span style="color: #F78C6C;">1</span><span style="color: #BFC7D5;">);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #697098;">//</span><span style="color: #697098;"> Creating a token without scopes...</span></div><div class='line'><span style="color: #BEC5D4;">$token</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$user</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">createToken</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">Token Name</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">)</span><span style="color: #89DDFF;">-&gt;accessToken</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #697098;">//</span><span style="color: #697098;"> Creating a token with scopes...</span></div><div class='line'><span style="color: #BEC5D4;">$token</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$user</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">createToken</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">My Token</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, [</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">place-orders</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">])</span><span style="color: #89DDFF;">-&gt;accessToken</span><span style="color: #BFC7D5;">;</span></div></code></pre>
<h4 id="personal-access-tokens-json-api"><a href="#personal-access-tokens-json-api">JSON API</a></h4>
<p>Passport also includes a JSON API for managing personal access tokens. You may pair this with your own frontend to offer your users a dashboard for managing personal access tokens. Below, we'll review all of the API endpoints for managing personal access tokens. For convenience, we'll use <a href="https://github.com/mzabriskie/axios">Axios</a> to demonstrate making HTTP requests to the endpoints.</p>
<p>The JSON API is guarded by the <code>web</code> and <code>auth</code> middleware; therefore, it may only be called from your own application. It is not able to be called from an external source.</p>
<h4 id="get-oauthscopes"><a href="#get-oauthscopes"><code>GET /oauth/scopes</code></a></h4>
<p>This route returns all of the <a href="#token-scopes">scopes</a> defined for your application. You may use this route to list the scopes a user may assign to a personal access token:</p>
<div class="code-container">
<pre><code data-theme="olaolu-palenight" data-lang="js" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #BFC7D5;">axios</span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">get</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/oauth/scopes</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">)</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">then</span><span style="color: #BFC7D5;">(</span><span style="color: #7986E7;">response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">        console</span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">log</span><span style="color: #BFC7D5;">(response</span><span style="color: #C792EA;">.</span><span style="color: #89DDFF;">data</span><span style="color: #BFC7D5;">);</span></div><div class='line'><span style="color: #BFC7D5;">    });</span></div></code></pre>
</div>
<h4 id="get-oauthpersonal-access-tokens"><a href="#get-oauthpersonal-access-tokens"><code>GET /oauth/personal-access-tokens</code></a></h4>
<p>This route returns all of the personal access tokens that the authenticated user has created. This is primarily useful for listing all of the user's tokens so that they may edit or revoke them:</p>
<div class="code-container">
<pre><code data-theme="olaolu-palenight" data-lang="js" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #BFC7D5;">axios</span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">get</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/oauth/personal-access-tokens</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">)</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">then</span><span style="color: #BFC7D5;">(</span><span style="color: #7986E7;">response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">        console</span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">log</span><span style="color: #BFC7D5;">(response</span><span style="color: #C792EA;">.</span><span style="color: #89DDFF;">data</span><span style="color: #BFC7D5;">);</span></div><div class='line'><span style="color: #BFC7D5;">    });</span></div></code></pre>
</div>
<h4 id="post-oauthpersonal-access-tokens"><a href="#post-oauthpersonal-access-tokens"><code>POST /oauth/personal-access-tokens</code></a></h4>
<p>This route creates new personal access tokens. It requires two pieces of data: the token's <code>name</code> and the <code>scopes</code> that should be assigned to the token:</p>
<div class="code-container">
<pre><code data-theme="olaolu-palenight" data-lang="js" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">const</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">data</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">    name: </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">Token Name</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    scopes: []</span></div><div class='line'><span style="color: #BFC7D5;">};</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BFC7D5;">axios</span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">post</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/oauth/personal-access-tokens</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, data)</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">then</span><span style="color: #BFC7D5;">(</span><span style="color: #7986E7;">response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">        console</span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">log</span><span style="color: #BFC7D5;">(response</span><span style="color: #C792EA;">.</span><span style="color: #89DDFF;">data</span><span style="color: #C792EA;">.</span><span style="color: #89DDFF;">accessToken</span><span style="color: #BFC7D5;">);</span></div><div class='line'><span style="color: #BFC7D5;">    })</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">catch</span><span style="color: #BFC7D5;"> (</span><span style="color: #7986E7;">response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=&gt;</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #697098;">//</span><span style="color: #697098;"> List errors on response...</span></div><div class='line'><span style="color: #BFC7D5;">    });</span></div></code></pre>
</div>
<h4 id="delete-oauthpersonal-access-tokenstoken-id"><a href="#delete-oauthpersonal-access-tokenstoken-id"><code>DELETE /oauth/personal-access-tokens/{token-id}</code></a></h4>
<p>This route may be used to revoke personal access tokens:</p>
<div class="code-container">
<pre><code data-theme="olaolu-palenight" data-lang="js" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #BFC7D5;">axios</span><span style="color: #C792EA;">.</span><span style="color: #82AAFF;">delete</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/oauth/personal-access-tokens/</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">+</span><span style="color: #BFC7D5;"> tokenId);</span></div></code></pre>
</div>
<h2 id="protecting-routes"><a href="#protecting-routes">Protecting Routes</a></h2>
<h3 id="via-middleware"><a href="#via-middleware">Via Middleware</a></h3>
<p>Passport includes an <a href="authentication.html#adding-custom-guards">authentication guard</a> that will validate access tokens on incoming requests. Once you have configured the <code>api</code> guard to use the <code>passport</code> driver, you only need to specify the <code>auth:api</code> middleware on any routes that should require a valid access token:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #FFCB8B;">Route</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">get</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/user</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">()</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #697098;">//</span><span style="color: #697098;"> ...</span></div><div class='line'><span style="color: #BFC7D5;">})</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">middleware</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">auth:api</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">);</span></div></code></pre>
<div class="mb-10 max-w-2xl mx-auto px-4 py-8 shadow-lg lg:flex lg:items-center callout">
    <div class="w-20 h-20 mb-6 flex items-center justify-center shrink-0 lg:mb-0 bg-red-600">
        <div class="opacity-75"><svg width="6" height="35" viewBox="0 0 6 35" xmlns="http://www.w3.org/2000/svg"><title>exclamation</title><path d="M0 29h6v6H0v-6zM0 0h6v24H0V0z" fill="#FFF" fill-rule="nonzero"/></svg>
</div>
    </div>
    <p class="mb-0 lg:ml-6 callout">
If you are using the <a href="#client-credentials-grant-tokens">client credentials grant</a>, you should use <a href="#client-credentials-grant-tokens">the <code>client</code> middleware</a> to protect your routes instead of the <code>auth:api</code> middleware.</p>
</div>
<h4 id="multiple-authentication-guards"><a href="#multiple-authentication-guards">Multiple Authentication Guards</a></h4>
<p>If your application authenticates different types of users that perhaps use entirely different Eloquent models, you will likely need to define a guard configuration for each user provider type in your application. This allows you to protect requests intended for specific user providers. For example, given the following guard configuration the <code>config/auth.php</code> configuration file:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">api</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> [</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">driver</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">passport</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">provider</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">users</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">],</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">api-customers</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> [</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">driver</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">passport</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">provider</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">customers</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">],</span></div></code></pre>
<p>The following route will utilize the <code>api-customers</code> guard, which uses the <code>customers</code> user provider, to authenticate incoming requests:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #FFCB8B;">Route</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">get</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/customer</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">()</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #697098;">//</span><span style="color: #697098;"> ...</span></div><div class='line'><span style="color: #BFC7D5;">})</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">middleware</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">auth:api-customers</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">);</span></div></code></pre>
<div class="mb-10 max-w-2xl mx-auto px-4 py-8 shadow-lg lg:flex lg:items-center callout">
    <div class="w-20 h-20 mb-6 flex items-center justify-center shrink-0 lg:mb-0 bg-purple-600">
        <div class="opacity-75"><svg width="28" height="40" viewBox="0 0 28 40" xmlns="http://www.w3.org/2000/svg"><title>lightbulb</title><path d="M12 28h4v-8h-4v8zM8 40h12v-8H8v8zm13.98-14.52c-1.001.705-1.661 1.545-1.98 2.52H8c-.416-.959-1.076-1.799-1.98-2.52A13.99 13.99 0 0 1 0 14C0 6.272 6.272 0 14 0s14 6.272 14 14a13.99 13.99 0 0 1-6.02 11.48z" fill="#FFF" fill-rule="nonzero"/></svg></div>
    </div>
    <p class="mb-0 lg:ml-6 callout">
For more information on using multiple user providers with Passport, please consult the <a href="#customizing-the-user-provider">password grant documentation</a>.</p>
</div>
<h3 id="passing-the-access-token"><a href="#passing-the-access-token">Passing the Access Token</a></h3>
<p>When calling routes that are protected by Passport, your application's API consumers should specify their access token as a <code>Bearer</code> token in the <code>Authorization</code> header of their request. For example, when using the Guzzle HTTP library:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Support\Facades\</span><span style="color: #FFCB8B;">Http</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BEC5D4;">$response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">Http</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">withHeaders</span><span style="color: #BFC7D5;">([</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">Accept</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">application/json</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">Authorization</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">Bearer </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #89DDFF;">.</span><span style="color: #BEC5D4;">$accessToken</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">])</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">get</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">https://passport-app.test/api/user</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$response</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">json</span><span style="color: #BFC7D5;">();</span></div></code></pre>
<h2 id="token-scopes"><a href="#token-scopes">Token Scopes</a></h2>
<p>Scopes allow your API clients to request a specific set of permissions when requesting authorization to access an account. For example, if you are building an e-commerce application, not all API consumers will need the ability to place orders. Instead, you may allow the consumers to only request authorization to access order shipment statuses. In other words, scopes allow your application's users to limit the actions a third-party application can perform on their behalf.</p>
<h3 id="defining-scopes"><a href="#defining-scopes">Defining Scopes</a></h3>
<p>You may define your API's scopes using the <code>Passport::tokensCan</code> method in the <code>boot</code> method of your application's <code>App\Providers\AppServiceProvider</code> class. The <code>tokensCan</code> method accepts an array of scope names and scope descriptions. The scope description may be anything you wish and will be displayed to users on the authorization approval screen:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #697098;">/**</span></div><div class='line'><span style="color: #697098;"> * Bootstrap any application services.</span></div><div class='line'><span style="color: #697098;"> </span><span style="color: #697098;">*/</span></div><div class='line'><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">boot</span><span style="color: #D9F5DD;">()</span><span style="color: #89DDFF;">:</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">void</span></div><div class='line'><span style="color: #BFC7D5;">{</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #FFCB8B;">Passport</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">tokensCan</span><span style="color: #BFC7D5;">([</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">place-orders</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">Place orders</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">check-status</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">Check order status</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    ]);</span></div><div class='line'><span style="color: #BFC7D5;">}</span></div></code></pre>
<h3 id="default-scope"><a href="#default-scope">Default Scope</a></h3>
<p>If a client does not request any specific scopes, you may configure your Passport server to attach default scope(s) to the token using the <code>setDefaultScope</code> method. Typically, you should call this method from the <code>boot</code> method of your application's <code>App\Providers\AppServiceProvider</code> class:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Laravel\Passport\</span><span style="color: #FFCB8B;">Passport</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #FFCB8B;">Passport</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">tokensCan</span><span style="color: #BFC7D5;">([</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">place-orders</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">Place orders</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">check-status</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">Check order status</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">]);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #FFCB8B;">Passport</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">setDefaultScope</span><span style="color: #BFC7D5;">([</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">check-status</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">place-orders</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">]);</span></div></code></pre>
<div class="mb-10 max-w-2xl mx-auto px-4 py-8 shadow-lg lg:flex lg:items-center callout">
    <div class="w-20 h-20 mb-6 flex items-center justify-center shrink-0 lg:mb-0 bg-purple-600">
        <div class="opacity-75"><svg width="28" height="40" viewBox="0 0 28 40" xmlns="http://www.w3.org/2000/svg"><title>lightbulb</title><path d="M12 28h4v-8h-4v8zM8 40h12v-8H8v8zm13.98-14.52c-1.001.705-1.661 1.545-1.98 2.52H8c-.416-.959-1.076-1.799-1.98-2.52A13.99 13.99 0 0 1 0 14C0 6.272 6.272 0 14 0s14 6.272 14 14a13.99 13.99 0 0 1-6.02 11.48z" fill="#FFF" fill-rule="nonzero"/></svg></div>
    </div>
    <p class="mb-0 lg:ml-6 callout">
Passport's default scopes do not apply to personal access tokens that are generated by the user.</p>
</div>
<h3 id="assigning-scopes-to-tokens"><a href="#assigning-scopes-to-tokens">Assigning Scopes to Tokens</a></h3>
<h4 id="when-requesting-authorization-codes"><a href="#when-requesting-authorization-codes">When Requesting Authorization Codes</a></h4>
<p>When requesting an access token using the authorization code grant, consumers should specify their desired scopes as the <code>scope</code> query string parameter. The <code>scope</code> parameter should be a space-delimited list of scopes:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #FFCB8B;">Route</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">get</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/redirect</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">()</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$query</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">http_build_query</span><span style="color: #BFC7D5;">([</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client_id</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #82AAFF;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #82AAFF;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">client-id</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">redirect_uri</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #82AAFF;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #82AAFF;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">http://example.com/callback</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">response_type</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #82AAFF;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #82AAFF;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">code</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">scope</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #82AAFF;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #82AAFF;"> </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">place-orders check-status</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #82AAFF;">    </span><span style="color: #BFC7D5;">]);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">return</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">redirect</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">http://passport-app.test/oauth/authorize?</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #89DDFF;">.</span><span style="color: #BFC7D5;">$</span><span style="color: #BEC5D4;">query</span><span style="color: #BFC7D5;">);</span></div><div class='line'><span style="color: #BFC7D5;">});</span></div></code></pre>
<h4 id="when-issuing-personal-access-tokens"><a href="#when-issuing-personal-access-tokens">When Issuing Personal Access Tokens</a></h4>
<p>If you are issuing personal access tokens using the <code>App\Models\User</code> model's <code>createToken</code> method, you may pass the array of desired scopes as the second argument to the method:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #BEC5D4;">$token</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$user</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">createToken</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">My Token</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, [</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">place-orders</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">])</span><span style="color: #89DDFF;">-&gt;accessToken</span><span style="color: #BFC7D5;">;</span></div></code></pre>
<h3 id="checking-scopes"><a href="#checking-scopes">Checking Scopes</a></h3>
<p>Passport includes two middleware that may be used to verify that an incoming request is authenticated with a token that has been granted a given scope. To get started, define the following middleware aliases in your application's <code>bootstrap/app.php</code> file:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Laravel\Passport\Http\Middleware\</span><span style="color: #FFCB8B;">CheckForAnyScope</span><span style="color: #BFC7D5;">;</span></div><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Laravel\Passport\Http\Middleware\</span><span style="color: #FFCB8B;">CheckScopes</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">withMiddleware</span><span style="color: #BFC7D5;">(</span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">(</span><span style="color: #FFCB8B;">Middleware</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$middleware</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$middleware</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">alias</span><span style="color: #BFC7D5;">([</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">scopes</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">CheckScopes</span><span style="color: #89DDFF;">::</span><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">scope</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;"> </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #BFC7D5;"> </span><span style="color: #FFCB8B;">CheckForAnyScope</span><span style="color: #89DDFF;">::</span><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    ]);</span></div><div class='line'><span style="color: #BFC7D5;">})</span></div></code></pre>
<h4 id="check-for-all-scopes"><a href="#check-for-all-scopes">Check For All Scopes</a></h4>
<p>The <code>scopes</code> middleware may be assigned to a route to verify that the incoming request's access token has all of the listed scopes:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #FFCB8B;">Route</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">get</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/orders</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">()</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #697098;">//</span><span style="color: #697098;"> Access token has both &quot;check-status&quot; and &quot;place-orders&quot; scopes...</span></div><div class='line'><span style="color: #BFC7D5;">})</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">middleware</span><span style="color: #BFC7D5;">([</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">auth:api</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">scopes:check-status,place-orders</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">]);</span></div></code></pre>
<h4 id="check-for-any-scopes"><a href="#check-for-any-scopes">Check for Any Scopes</a></h4>
<p>The <code>scope</code> middleware may be assigned to a route to verify that the incoming request's access token has <em>at least one</em> of the listed scopes:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #FFCB8B;">Route</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">get</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/orders</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">()</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #697098;">//</span><span style="color: #697098;"> Access token has either &quot;check-status&quot; or &quot;place-orders&quot; scope...</span></div><div class='line'><span style="color: #BFC7D5;">})</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">middleware</span><span style="color: #BFC7D5;">([</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">auth:api</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">scope:check-status,place-orders</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">]);</span></div></code></pre>
<h4 id="checking-scopes-on-a-token-instance"><a href="#checking-scopes-on-a-token-instance">Checking Scopes on a Token Instance</a></h4>
<p>Once an access token authenticated request has entered your application, you may still check if the token has a given scope using the <code>tokenCan</code> method on the authenticated <code>App\Models\User</code> instance:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Illuminate\Http\</span><span style="color: #FFCB8B;">Request</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #FFCB8B;">Route</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">get</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/orders</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">(</span><span style="color: #FFCB8B;">Request</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$request</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #C792EA;">if</span><span style="color: #BFC7D5;"> (</span><span style="color: #BEC5D4;">$request</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">user</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">tokenCan</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">place-orders</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">)) {</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #697098;">//</span><span style="color: #697098;"> ...</span></div><div class='line'><span style="color: #BFC7D5;">    }</span></div><div class='line'><span style="color: #BFC7D5;">});</span></div></code></pre>
<h4 id="additional-scope-methods"><a href="#additional-scope-methods">Additional Scope Methods</a></h4>
<p>The <code>scopeIds</code> method will return an array of all defined IDs / names:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Laravel\Passport\</span><span style="color: #FFCB8B;">Passport</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #FFCB8B;">Passport</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">scopeIds</span><span style="color: #BFC7D5;">();</span></div></code></pre>
<p>The <code>scopes</code> method will return an array of all defined scopes as instances of <code>Laravel\Passport\Scope</code>:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #FFCB8B;">Passport</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">scopes</span><span style="color: #BFC7D5;">();</span></div></code></pre>
<p>The <code>scopesFor</code> method will return an array of <code>Laravel\Passport\Scope</code> instances matching the given IDs / names:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #FFCB8B;">Passport</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">scopesFor</span><span style="color: #BFC7D5;">([</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">place-orders</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">, </span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">check-status</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">]);</span></div></code></pre>
<p>You may determine if a given scope has been defined using the <code>hasScope</code> method:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #FFCB8B;">Passport</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">hasScope</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">place-orders</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">);</span></div></code></pre>
<h2 id="consuming-your-api-with-javascript"><a href="#consuming-your-api-with-javascript">Consuming Your API With JavaScript</a></h2>
<p>When building an API, it can be extremely useful to be able to consume your own API from your JavaScript application. This approach to API development allows your own application to consume the same API that you are sharing with the world. The same API may be consumed by your web application, mobile applications, third-party applications, and any SDKs that you may publish on various package managers.</p>
<p>Typically, if you want to consume your API from your JavaScript application, you would need to manually send an access token to the application and pass it with each request to your application. However, Passport includes a middleware that can handle this for you. All you need to do is append the <code>CreateFreshApiToken</code> middleware to the <code>web</code> middleware group in your application's <code>bootstrap/app.php</code> file:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Laravel\Passport\Http\Middleware\</span><span style="color: #FFCB8B;">CreateFreshApiToken</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">withMiddleware</span><span style="color: #BFC7D5;">(</span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #D9F5DD;">(</span><span style="color: #FFCB8B;">Middleware</span><span style="color: #BFC7D5;"> </span><span style="color: #BEC5D4;">$middleware</span><span style="color: #D9F5DD;">)</span><span style="color: #BFC7D5;"> {</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$middleware</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">web</span><span style="color: #BFC7D5;">(append: [</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #FFCB8B;">CreateFreshApiToken</span><span style="color: #89DDFF;">::</span><span style="color: #C792EA;">class</span><span style="color: #BFC7D5;">,</span></div><div class='line'><span style="color: #BFC7D5;">    ]);</span></div><div class='line'><span style="color: #BFC7D5;">})</span></div></code></pre>
<div class="mb-10 max-w-2xl mx-auto px-4 py-8 shadow-lg lg:flex lg:items-center callout">
    <div class="w-20 h-20 mb-6 flex items-center justify-center shrink-0 lg:mb-0 bg-red-600">
        <div class="opacity-75"><svg width="6" height="35" viewBox="0 0 6 35" xmlns="http://www.w3.org/2000/svg"><title>exclamation</title><path d="M0 29h6v6H0v-6zM0 0h6v24H0V0z" fill="#FFF" fill-rule="nonzero"/></svg>
</div>
    </div>
    <p class="mb-0 lg:ml-6 callout">
You should ensure that the <code>CreateFreshApiToken</code> middleware is the last middleware listed in your middleware stack.</p>
</div>
<p>This middleware will attach a <code>laravel_token</code> cookie to your outgoing responses. This cookie contains an encrypted JWT that Passport will use to authenticate API requests from your JavaScript application. The JWT has a lifetime equal to your <code>session.lifetime</code> configuration value. Now, since the browser will automatically send the cookie with all subsequent requests, you may make requests to your application's API without explicitly passing an access token:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #82AAFF;">axios</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">get</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/api/user</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">)</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">then</span><span style="color: #BFC7D5;">(</span><span style="color: #82AAFF;">response </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #82AAFF;"> </span><span style="color: #BFC7D5;">{</span></div><div class='line'><span style="color: #82AAFF;">        console</span><span style="color: #89DDFF;">.</span><span style="color: #89DDFF;">log</span><span style="color: #BFC7D5;">(</span><span style="color: #82AAFF;">response</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">data</span><span style="color: #BFC7D5;">);</span></div><div class='line'><span style="color: #82AAFF;">    </span><span style="color: #BFC7D5;">});</span></div></code></pre>
<h4 id="customizing-the-cookie-name"><a href="#customizing-the-cookie-name">Customizing the Cookie Name</a></h4>
<p>If needed, you can customize the <code>laravel_token</code> cookie's name using the <code>Passport::cookie</code> method. Typically, this method should be called from the <code>boot</code> method of your application's <code>App\Providers\AppServiceProvider</code> class:</p>
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #697098;">/**</span></div><div class='line'><span style="color: #697098;"> * Bootstrap any application services.</span></div><div class='line'><span style="color: #697098;"> </span><span style="color: #697098;">*/</span></div><div class='line'><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">boot</span><span style="color: #D9F5DD;">()</span><span style="color: #89DDFF;">:</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">void</span></div><div class='line'><span style="color: #BFC7D5;">{</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #FFCB8B;">Passport</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">cookie</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">custom_name</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">);</span></div><div class='line'><span style="color: #BFC7D5;">}</span></div></code></pre>
<h4 id="csrf-protection"><a href="#csrf-protection">CSRF Protection</a></h4>
<p>When using this method of authentication, you will need to ensure a valid CSRF token header is included in your requests. The default Laravel JavaScript scaffolding includes an Axios instance, which will automatically use the encrypted <code>XSRF-TOKEN</code> cookie value to send an <code>X-XSRF-TOKEN</code> header on same-origin requests.</p>
<div class="mb-10 max-w-2xl mx-auto px-4 py-8 shadow-lg lg:flex lg:items-center callout">
    <div class="w-20 h-20 mb-6 flex items-center justify-center shrink-0 lg:mb-0 bg-purple-600">
        <div class="opacity-75"><svg width="28" height="40" viewBox="0 0 28 40" xmlns="http://www.w3.org/2000/svg"><title>lightbulb</title><path d="M12 28h4v-8h-4v8zM8 40h12v-8H8v8zm13.98-14.52c-1.001.705-1.661 1.545-1.98 2.52H8c-.416-.959-1.076-1.799-1.98-2.52A13.99 13.99 0 0 1 0 14C0 6.272 6.272 0 14 0s14 6.272 14 14a13.99 13.99 0 0 1-6.02 11.48z" fill="#FFF" fill-rule="nonzero"/></svg></div>
    </div>
    <p class="mb-0 lg:ml-6 callout">
If you choose to send the <code>X-CSRF-TOKEN</code> header instead of <code>X-XSRF-TOKEN</code>, you will need to use the unencrypted token provided by <code>csrf_token()</code>.</p>
</div>
<h2 id="events"><a href="#events">Events</a></h2>
<p>Passport raises events when issuing access tokens and refresh tokens. You may <a href="events.html">listen for these events</a> to prune or revoke other access tokens in your database:</p>
<div class="overflow-auto">
<table>
<thead>
<tr>
<th>Event Name</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Laravel\Passport\Events\AccessTokenCreated</code></td>
</tr>
<tr>
<td><code>Laravel\Passport\Events\RefreshTokenCreated</code></td>
</tr>
</tbody>
</table>
</div>
<h2 id="testing"><a href="#testing">Testing</a></h2>
<p>Passport's <code>actingAs</code> method may be used to specify the currently authenticated user as well as its scopes. The first argument given to the <code>actingAs</code> method is the user instance and the second is an array of scopes that should be granted to the user's token:</p>
<div class="tabbed-code" data-group="1df3cf502597c6d6b58a6e0bfc806498">
<div class="tabbed-code-nav">
<button class="tabbed-code-nav-button active" data-tab="Pest" onClick="setTab('Pest', '1df3cf502597c6d6b58a6e0bfc806498')">Pest</button>
<button class="tabbed-code-nav-button" data-tab="PHPUnit" onClick="setTab('PHPUnit', '1df3cf502597c6d6b58a6e0bfc806498')">PHPUnit</button>
</div>
<div class="tabbed-code-body">
<div class="code-container active" data-tab="Pest">
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> App\Models\</span><span style="color: #FFCB8B;">User</span><span style="color: #BFC7D5;">;</span></div><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Laravel\Passport\</span><span style="color: #FFCB8B;">Passport</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #82AAFF;">test</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">servers can be created</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span><span style="color: #82AAFF;"> </span><span style="color: #C792EA;">function</span><span style="color: #82AAFF;"> </span><span style="color: #D9F5DD;">()</span><span style="color: #82AAFF;"> </span><span style="color: #BFC7D5;">{</span></div><div class='line'><span style="color: #82AAFF;">    </span><span style="color: #FFCB8B;">Passport</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">actingAs</span><span style="color: #BFC7D5;">(</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #FFCB8B;">User</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">factory</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">create</span><span style="color: #BFC7D5;">(),</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #BFC7D5;">[</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">create-servers</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">]</span></div><div class='line'><span style="color: #82AAFF;">    </span><span style="color: #BFC7D5;">);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #82AAFF;">    </span><span style="color: #BFC7D5;">$</span><span style="color: #BEC5D4;">response</span><span style="color: #82AAFF;"> </span><span style="color: #C792EA;">=</span><span style="color: #82AAFF;"> </span><span style="color: #BFC7D5;">$</span><span style="color: #FF5572;">this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">post</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/api/create-server</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #82AAFF;">    </span><span style="color: #BFC7D5;">$</span><span style="color: #BEC5D4;">response</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">assertStatus</span><span style="color: #BFC7D5;">(</span><span style="color: #F78C6C;">201</span><span style="color: #BFC7D5;">);</span></div><div class='line'><span style="color: #BFC7D5;">});</span></div></code></pre>
</div>
<div class="code-container" data-tab="PHPUnit">
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> App\Models\</span><span style="color: #FFCB8B;">User</span><span style="color: #BFC7D5;">;</span></div><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Laravel\Passport\</span><span style="color: #FFCB8B;">Passport</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">test_servers_can_be_created</span><span style="color: #D9F5DD;">()</span><span style="color: #89DDFF;">:</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">void</span></div><div class='line'><span style="color: #BFC7D5;">{</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #FFCB8B;">Passport</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">actingAs</span><span style="color: #BFC7D5;">(</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #FFCB8B;">User</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">factory</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">create</span><span style="color: #BFC7D5;">(),</span></div><div class='line'><span style="color: #BFC7D5;">        [</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">create-servers</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">]</span></div><div class='line'><span style="color: #BFC7D5;">    );</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FF5572;">$this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">post</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/api/create-server</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$response</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">assertStatus</span><span style="color: #BFC7D5;">(</span><span style="color: #F78C6C;">201</span><span style="color: #BFC7D5;">);</span></div><div class='line'><span style="color: #BFC7D5;">}</span></div></code></pre>
</div>
</div>
</div>
<p>Passport's <code>actingAsClient</code> method may be used to specify the currently authenticated client as well as its scopes. The first argument given to the <code>actingAsClient</code> method is the client instance and the second is an array of scopes that should be granted to the client's token:</p>
<div class="tabbed-code" data-group="1df3cf502597c6d6b58a6e0bfc806498">
<div class="tabbed-code-nav">
<button class="tabbed-code-nav-button active" data-tab="Pest" onClick="setTab('Pest', '1df3cf502597c6d6b58a6e0bfc806498')">Pest</button>
<button class="tabbed-code-nav-button" data-tab="PHPUnit" onClick="setTab('PHPUnit', '1df3cf502597c6d6b58a6e0bfc806498')">PHPUnit</button>
</div>
<div class="tabbed-code-body">
<div class="code-container active" data-tab="Pest">
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Laravel\Passport\</span><span style="color: #FFCB8B;">Client</span><span style="color: #BFC7D5;">;</span></div><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Laravel\Passport\</span><span style="color: #FFCB8B;">Passport</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #82AAFF;">test</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">orders can be retrieved</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">,</span><span style="color: #82AAFF;"> </span><span style="color: #C792EA;">function</span><span style="color: #82AAFF;"> </span><span style="color: #D9F5DD;">()</span><span style="color: #82AAFF;"> </span><span style="color: #BFC7D5;">{</span></div><div class='line'><span style="color: #82AAFF;">    </span><span style="color: #FFCB8B;">Passport</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">actingAsClient</span><span style="color: #BFC7D5;">(</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #FFCB8B;">Client</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">factory</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">create</span><span style="color: #BFC7D5;">(),</span></div><div class='line'><span style="color: #82AAFF;">        </span><span style="color: #BFC7D5;">[</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">check-status</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">]</span></div><div class='line'><span style="color: #82AAFF;">    </span><span style="color: #BFC7D5;">);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #82AAFF;">    </span><span style="color: #BFC7D5;">$</span><span style="color: #BEC5D4;">response</span><span style="color: #82AAFF;"> </span><span style="color: #C792EA;">=</span><span style="color: #82AAFF;"> </span><span style="color: #BFC7D5;">$</span><span style="color: #FF5572;">this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">get</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/api/orders</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #82AAFF;">    </span><span style="color: #BFC7D5;">$</span><span style="color: #BEC5D4;">response</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">assertStatus</span><span style="color: #BFC7D5;">(</span><span style="color: #F78C6C;">200</span><span style="color: #BFC7D5;">);</span></div><div class='line'><span style="color: #BFC7D5;">});</span></div></code></pre>
</div>
<div class="code-container" data-tab="PHPUnit">
<pre><code data-theme="olaolu-palenight" data-lang="php" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #7580B850;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Laravel\Passport\</span><span style="color: #FFCB8B;">Client</span><span style="color: #BFC7D5;">;</span></div><div class='line'><span style="color: #C792EA;">use</span><span style="color: #BFC7D5;"> Laravel\Passport\</span><span style="color: #FFCB8B;">Passport</span><span style="color: #BFC7D5;">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #C792EA;">public</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">function</span><span style="color: #BFC7D5;"> </span><span style="color: #82AAFF;">test_orders_can_be_retrieved</span><span style="color: #D9F5DD;">()</span><span style="color: #89DDFF;">:</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">void</span></div><div class='line'><span style="color: #BFC7D5;">{</span></div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #FFCB8B;">Passport</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">actingAsClient</span><span style="color: #BFC7D5;">(</span></div><div class='line'><span style="color: #BFC7D5;">        </span><span style="color: #FFCB8B;">Client</span><span style="color: #89DDFF;">::</span><span style="color: #82AAFF;">factory</span><span style="color: #BFC7D5;">()</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">create</span><span style="color: #BFC7D5;">(),</span></div><div class='line'><span style="color: #BFC7D5;">        [</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">check-status</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">]</span></div><div class='line'><span style="color: #BFC7D5;">    );</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$response</span><span style="color: #BFC7D5;"> </span><span style="color: #C792EA;">=</span><span style="color: #BFC7D5;"> </span><span style="color: #FF5572;">$this</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">get</span><span style="color: #BFC7D5;">(</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #C3E88D;">/api/orders</span><span style="color: #D9F5DD;">&#39;</span><span style="color: #BFC7D5;">);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #BFC7D5;">    </span><span style="color: #BEC5D4;">$response</span><span style="color: #89DDFF;">-&gt;</span><span style="color: #82AAFF;">assertStatus</span><span style="color: #BFC7D5;">(</span><span style="color: #F78C6C;">200</span><span style="color: #BFC7D5;">);</span></div><div class='line'><span style="color: #BFC7D5;">}</span></div></code></pre>
</div>
</div>
</div><script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
function setTab(tab, group, save) {
    save = typeof save === 'undefined' ? true : save

    document
        .querySelectorAll(`.tabbed-code[data-group="${group}"] .tabbed-code-nav-button`)
        .forEach(el => el.classList.remove('active'))
    document
        .querySelectorAll(`.tabbed-code[data-group="${group}"] .code-container`)
        .forEach(el => el.classList.remove('active'))
    document
        .querySelectorAll(`.tabbed-code[data-group="${group}"] [data-tab="${tab}"]`)
        .forEach(el => el.classList.add('active'))

    if (save) {
        saveTab(tab, group)
    }
}

function getTabs() {
    try {
        return JSON.parse(localStorage.tabs)
    } catch {
        return {}
    }
}

function saveTab(tab, group) {
    localStorage.tabs = JSON.stringify({
        ...getTabs(),
        [group]: tab,
    })
}

function restoreTabs() {
    Object.entries(getTabs()).forEach(([group, tab]) => setTab(tab, group, false))
}

restoreTabs()

</script>

                                <script async type="text/javascript" src="../../../cdn.carbonads.com/carbon83bb.js?serve=CKYILK3E&amp;placement=laravelcom" id="_carbonads_js"></script>
</div>
                        </section>
                    </section>
                </div>
            </section>
        </div>
    </div>

<footer class="relative pt-12 dark:bg-dark-700">
    <div class="max-w-screen-2xl mx-auto w-full px-8">
        <div>
            <a href="https://laravel.com/" class="inline-flex">
                <img class="w-16 h-16" src="https://laravel.com/img/logomark.min.svg" alt="Laravel" width="64" height="64" loading="lazy">
            </a>
        </div>

        <div class="mt-6 grid grid-cols-12 md:gap-x-8 gap-y-12 sm:mt-12">
            <div class="col-span-12 lg:col-span-4">
                <p class="max-w-sm text-xs text-gray-700 sm:text-sm dark:text-gray-500">
                    Laravel is a web application framework with expressive, elegant syntax. We believe development must
                    be an enjoyable and creative experience to be truly fulfilling. Laravel attempts to take the pain
                    out of development by easing common tasks used in most web projects.</p>
                <ul class="mt-6 flex items-center space-x-3">
                    <li>
                        <a href="https://x.com/laravelphp">
                            <img class="hidden dark:inline-block w-6 h-6" src="https://laravel.com/img/social/x.dark.min.svg" alt="X" width="24" height="20" loading="lazy">
                            <img class="inline-block dark:hidden w-6 h-6" src="https://laravel.com/img/social/x.min.svg" alt="X" width="24" height="20" loading="lazy">
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/laravel">
                            <img class="hidden dark:inline-block w-6 h-6"
                                src="https://laravel.com/img/social/github.dark.min.svg" alt="GitHub" width="24" height="24"
                                loading="lazy">
                            <img class="inline-block dark:hidden w-6 h-6"
                                src="https://laravel.com/img/social/github.min.svg" alt="GitHub" width="24" height="24"
                                loading="lazy">
                        </a>
                    </li>
                    <li>
                        <a href="https://discord.gg/laravel">
                            <img class="hidden dark:inline-block w-6 h-6"
                                src="https://laravel.com/img/social/discord.dark.min.svg" alt="Discord" width="21" height="24"
                                loading="lazy">
                            <img class="inline-block dark:hidden w-6 h-6"
                                src="https://laravel.com/img/social/discord.min.svg" alt="Discord" width="21" height="24"
                                loading="lazy">
                        </a>
                    </li>
                    <li>
                        <a href="https://www.youtube.com/laravelphp">
                            <img class="hidden dark:inline-block w-6 h-6"
                                src="https://laravel.com/img/social/youtube.dark.min.svg" alt="YouTube" width="169" height="150"
                                loading="lazy">
                            <img class="inline-block dark:hidden w-6 h-6"
                                src="https://laravel.com/img/social/youtube.min.svg" alt="YouTube" width="169" height="150"
                                loading="lazy">
                        </a>
                    </li>
                </ul>
            </div>
                            <div class="text-xs col-span-6 md:col-span-3 lg:col-span-2">
                    <span
                        class="uppercase dark:text-gray-200">Highlights</span>
                    <div class="mt-5">
                        <ul class="space-y-3 text-gray-700 dark:text-gray-500">
                                                            <li>
                                    <a href="releases.html"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Release Notes</a>
                                </li>
                                                            <li>
                                    <a href="installation.html"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Getting Started</a>
                                </li>
                                                            <li>
                                    <a href="routing.html"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Routing</a>
                                </li>
                                                            <li>
                                    <a href="blade.html"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Blade Templates</a>
                                </li>
                                                            <li>
                                    <a href="authentication.html"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Authentication</a>
                                </li>
                                                            <li>
                                    <a href="authorization.html"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Authorization</a>
                                </li>
                                                            <li>
                                    <a href="artisan.html"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Artisan Console</a>
                                </li>
                                                            <li>
                                    <a href="database.html"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Database</a>
                                </li>
                                                            <li>
                                    <a href="eloquent.html"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Eloquent ORM</a>
                                </li>
                                                            <li>
                                    <a href="testing.html"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Testing</a>
                                </li>
                                                    </ul>
                    </div>
                </div>
                            <div class="text-xs col-span-6 md:col-span-3 lg:col-span-2">
                    <span
                        class="uppercase dark:text-gray-200">Resources</span>
                    <div class="mt-5">
                        <ul class="space-y-3 text-gray-700 dark:text-gray-500">
                                                            <li>
                                    <a href="https://bootcamp.laravel.com/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Laravel Bootcamp</a>
                                </li>
                                                            <li>
                                    <a href="https://laracasts.com/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Laracasts</a>
                                </li>
                                                            <li>
                                    <a href="https://laravel-news.com/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Laravel News</a>
                                </li>
                                                            <li>
                                    <a href="https://laracon.us/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Laracon</a>
                                </li>
                                                            <li>
                                    <a href="https://laracon.au/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Laracon AU</a>
                                </li>
                                                            <li>
                                    <a href="https://laracon.eu/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Laracon EU</a>
                                </li>
                                                            <li>
                                    <a href="https://laracon.in/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Laracon India</a>
                                </li>
                                                            <li>
                                    <a href="https://larabelles.com/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Larabelles</a>
                                </li>
                                                            <li>
                                    <a href="https://laravel.com/careers"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Careers</a>
                                </li>
                                                            <li>
                                    <a href="https://larajobs.com/?partner=5"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Jobs</a>
                                </li>
                                                            <li>
                                    <a href="https://laracasts.com/discuss"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Forums</a>
                                </li>
                                                            <li>
                                    <a href="https://laravel.com/trademark"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Trademark</a>
                                </li>
                                                    </ul>
                    </div>
                </div>
                            <div class="text-xs col-span-6 md:col-span-3 lg:col-span-2">
                    <span
                        class="uppercase dark:text-gray-200">Partners</span>
                    <div class="mt-5">
                        <ul class="space-y-3 text-gray-700 dark:text-gray-500">
                                                            <li>
                                    <a href="https://vehikl.com/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Vehikl</a>
                                </li>
                                                            <li>
                                    <a href="https://webreinvent.com/?utm_source=laravel&amp;utm_medium=laravel.com&amp;utm_campaign=footer-link"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">WebReinvent</a>
                                </li>
                                                            <li>
                                    <a href="https://tighten.co/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Tighten</a>
                                </li>
                                                            <li>
                                    <a href="https://www.bacancytechnology.com/hire-laravel-developer?utm_source=laravel&amp;utm_medium=partners.laravel&amp;utm_campaign=sponsors"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Bacancy</a>
                                </li>
                                                            <li>
                                    <a href="https://64robots.com/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">64 Robots</a>
                                </li>
                                                            <li>
                                    <a href="https://activelogic.com/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Active Logic</a>
                                </li>
                                                            <li>
                                    <a href="https://www.blackairplane.com/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Black Airplane</a>
                                </li>
                                                            <li>
                                    <a href="https://www.byte5.net/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Byte 5</a>
                                </li>
                                                            <li>
                                    <a href="https://www.curotec.com/services/technologies/laravel/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Curotec</a>
                                </li>
                                                            <li>
                                    <a href="https://www.cyber-duck.co.uk/how-we-work/technology/laravel?utm_source=Laravel%20Partner&amp;utm_medium=Sponsorship"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Cyber-Duck</a>
                                </li>
                                                            <li>
                                    <a href="https://devsquad.com/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">DevSquad</a>
                                </li>
                                                            <li>
                                    <a href="https://jump24.co.uk/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Jump24</a>
                                </li>
                                                            <li>
                                    <a href="https://kirschbaumdevelopment.com/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Kirschbaum</a>
                                </li>
                                                    </ul>
                    </div>
                </div>
                            <div class="text-xs col-span-6 md:col-span-3 lg:col-span-2">
                    <span
                        class="uppercase dark:text-gray-200">Ecosystem</span>
                    <div class="mt-5">
                        <ul class="space-y-3 text-gray-700 dark:text-gray-500">
                                                            <li>
                                    <a href="starter-kits.html#laravel-breeze"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Breeze</a>
                                </li>
                                                            <li>
                                    <a href="billing.html"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Cashier</a>
                                </li>
                                                            <li>
                                    <a href="dusk.html"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Dusk</a>
                                </li>
                                                            <li>
                                    <a href="broadcasting.html"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Echo</a>
                                </li>
                                                            <li>
                                    <a href="https://envoyer.io/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Envoyer</a>
                                </li>
                                                            <li>
                                    <a href="https://forge.laravel.com/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Forge</a>
                                </li>
                                                            <li>
                                    <a href="https://herd.laravel.com/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Herd</a>
                                </li>
                                                            <li>
                                    <a href="horizon.html"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Horizon</a>
                                </li>
                                                            <li>
                                    <a href="https://inertiajs.com/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Inertia</a>
                                </li>
                                                            <li>
                                    <a href="https://jetstream.laravel.com/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Jetstream</a>
                                </li>
                                                            <li>
                                    <a href="https://livewire.laravel.com/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Livewire</a>
                                </li>
                                                            <li>
                                    <a href="https://nova.laravel.com/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Nova</a>
                                </li>
                                                            <li>
                                    <a href="octane.html"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Octane</a>
                                </li>
                                                            <li>
                                    <a href="pennant.html"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Pennant</a>
                                </li>
                                                            <li>
                                    <a href="pint.html"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Pint</a>
                                </li>
                                                            <li>
                                    <a href="prompts.html"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Prompts</a>
                                </li>
                                                            <li>
                                    <a href="https://pulse.laravel.com/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Pulse</a>
                                </li>
                                                            <li>
                                    <a href="https://reverb.laravel.com/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Reverb</a>
                                </li>
                                                            <li>
                                    <a href="sail.html"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Sail</a>
                                </li>
                                                            <li>
                                    <a href="sanctum.html"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Sanctum</a>
                                </li>
                                                            <li>
                                    <a href="scout.html"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Scout</a>
                                </li>
                                                            <li>
                                    <a href="socialite.html"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Socialite</a>
                                </li>
                                                            <li>
                                    <a href="https://spark.laravel.com/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Spark</a>
                                </li>
                                                            <li>
                                    <a href="telescope.html"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Telescope</a>
                                </li>
                                                            <li>
                                    <a href="https://vapor.laravel.com/"
                                        class="transition-colors hover:text-gray-600 dark:hover:text-gray-400">Vapor</a>
                                </li>
                                                    </ul>
                    </div>
                </div>
                    </div>
        <div class="mt-10 border-t pt-6 pb-16 border-gray-200 dark:border-dark-500">
            <p class="text-xs text-gray-700 dark:text-gray-400">
                Laravel is a Trademark of Laravel Holdings Inc.<br />
                Copyright &copy; 2011-2024 Laravel Holdings Inc.
            </p>
            <p class="mt-6 text-xs text-gray-700 dark:text-gray-400">
                Code highlighting provided by <a href="https://torchlight.dev/">Torchlight</a>
            </p>
        </div>
    </div>
</footer>

<script>
    var algolia_app_id = 'E3MIRNPJH5';
    var algolia_search_key = '1fa3a8fec06eb1858d6ca137211225c0';
    var version = '11.x';
</script>

<script>
    var _gaq=[['_setAccount','UA-23865777-1'],['_trackPageview']];
    (function(d,t){
        var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
        g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
        s.parentNode.insertBefore(g,s)
    }(document,'script'));
</script>

<!-- HubSpot -->
<script type="text/javascript" id="hs-script-loader" async defer src="../../../js-na1.hs-scripts.com/45240648.js"></script>

<div class="fixed">
    <input type="text">
</div>

</body>

<!-- Mirrored from laravel.com/docs/11.x/passport by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Oct 2024 03:14:26 GMT -->
</html>
